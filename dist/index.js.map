{"version":3,"sources":["../src/index.ts","#style-inject:#style-inject","../src/styles.css","../src/components/StrInput.tsx","../src/hooks/useInputStore.ts","../src/functions/dataTypesValidation.ts","../src/Utils/inputStoreUtils.ts","../src/store/InputStore.ts","../src/hooks/useComputedExpression.ts","../src/Utils/expressionHelper.ts","../src/components/InputTemplate.tsx","../src/Utils/setInitialValue.ts","../src/context/NameScopeContext.ts","../src/functions/camelCase.ts","../src/hooks/useFieldName.ts","../src/components/NumInput.tsx","../src/Utils/SetFieldValue.ts","../src/Utils/Helper.ts","../src/components/ArrayContainer.tsx","../src/components/ObjContainer.tsx","../src/components/SelectInput.tsx","../src/components/SelectTemplate.tsx","../src/components/DropdownModal.tsx","../src/functions/shallowOrDeepEqual.ts","../src/components/OptionItem.tsx","../src/hooks/useSelectOptions.ts","../src/components/AutoInput.tsx","../src/components/DateInput.tsx","../src/functions/dateHelper.ts","../src/components/DisabledInput.tsx","../src/components/SubmitButton.tsx","../src/Utils/getEditedData.ts","../src/components/InputContainer.tsx","../src/Utils/SetEditData.ts","../src/Utils/resetForm.ts"],"sourcesContent":["import './styles.css'\nexport { default as StrInput } from './components/StrInput';\nexport { default as NumInput } from './components/NumInput'\nexport { default as ArrayContainer } from './components/ArrayContainer'\nexport { default as ObjectContainer } from './components/ObjContainer'\nexport { default as SelectInput } from './components/SelectInput'\nexport { default as AutoInput } from './components/AutoInput'\nexport { default as DateInput } from './components/DateInput'\nexport { default as DisabledInput } from './components/DisabledInput';\nexport { default as SubmitButton, type ConfirmationRenderProps, type SubmitHandler, type SubmitButtonRef } from './components/SubmitButton';\nexport { default as InputContainer } from './components/InputContainer';\n// export { useInputStore } from './hooks/useInputStore';\nexport { setFieldValue } from './Utils/SetFieldValue';\n// export { SharedContext } from './Utils/sharedContextManager'\n// export { useResetForm } from './hooks/useResetForm'; // If you make this\nexport { setEditData } from './Utils/SetEditData'\nexport { ResetForm } from './Utils/resetForm'","\n          export default function styleInject(css, { insertAt } = {}) {\n            if (!css || typeof document === 'undefined') return\n          \n            const head = document.head || document.getElementsByTagName('head')[0]\n            const style = document.createElement('style')\n            style.type = 'text/css'\n          \n            if (insertAt === 'top') {\n              if (head.firstChild) {\n                head.insertBefore(style, head.firstChild)\n              } else {\n                head.appendChild(style)\n              }\n            } else {\n              head.appendChild(style)\n            }\n          \n            if (style.styleSheet) {\n              style.styleSheet.cssText = css\n            } else {\n              style.appendChild(document.createTextNode(css))\n            }\n          }\n          ","import styleInject from '#style-inject';styleInject(\"/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */@layer properties;@layer theme,base,components,utilities;@layer theme{:root,:host{--font-sans: ui-sans-serif, system-ui, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\", \\\"Noto Color Emoji\\\";--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \\\"Liberation Mono\\\", \\\"Courier New\\\", monospace;--color-blue-100: oklch(93.2% .032 255.585);--color-blue-200: oklch(88.2% .059 254.128);--color-blue-700: oklch(48.8% .243 264.376);--color-gray-50: oklch(98.5% .002 247.839);--color-gray-100: oklch(96.7% .003 264.542);--color-gray-200: oklch(92.8% .006 264.531);--color-gray-300: oklch(87.2% .01 258.338);--color-gray-400: oklch(70.7% .022 261.325);--color-gray-500: oklch(55.1% .027 264.364);--color-white: #fff;--spacing: .25rem;--font-weight-medium: 500;--radius-lg: .5rem;--blur-lg: 16px;--default-transition-duration: .15s;--default-transition-timing-function: cubic-bezier(.4, 0, .2, 1);--default-font-family: var(--font-sans);--default-mono-font-family: var(--font-mono)}}@layer base{*,:after,:before,::backdrop,::file-selector-button{box-sizing:border-box;margin:0;padding:0;border:0 solid}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:var(--default-font-family, ui-sans-serif, system-ui, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\", \\\"Noto Color Emoji\\\");font-feature-settings:var(--default-font-feature-settings, normal);font-variation-settings:var(--default-font-variation-settings, normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \\\"Liberation Mono\\\", \\\"Courier New\\\", monospace);font-feature-settings:var(--default-mono-font-feature-settings, normal);font-variation-settings:var(--default-mono-font-variation-settings, normal);font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea,::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;border-radius:0;background-color:transparent;opacity:1}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not (-webkit-appearance: -apple-pay-button)) or (contain-intrinsic-size: 1px){::placeholder{color:currentcolor;@supports (color: color-mix(in lab,red,red)){color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]),::file-selector-button{appearance:button}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer utilities{.pointer-events-none{pointer-events:none}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.top-0{top:calc(var(--spacing) * 0)}.top-2{top:calc(var(--spacing) * 2)}.top-full{top:100%}.left-0{left:calc(var(--spacing) * 0)}.left-4{left:calc(var(--spacing) * 4)}.left-5{left:calc(var(--spacing) * 5)}.z-10{z-index:10}.z-50{z-index:50}.container{width:100%;@media(width>=40rem){max-width:40rem}@media(width>=48rem){max-width:48rem}@media(width>=64rem){max-width:64rem}@media(width>=80rem){max-width:80rem}@media(width>=96rem){max-width:96rem}}.mt-1{margin-top:calc(var(--spacing) * 1)}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.h-4{height:calc(var(--spacing) * 4)}.h-12{height:calc(var(--spacing) * 12)}.h-full{height:100%}.max-h-4\\\\/5{max-height:80%}.max-h-48{max-height:calc(var(--spacing) * 48)}.max-h-60{max-height:calc(var(--spacing) * 60)}.w-4{width:calc(var(--spacing) * 4)}.w-full{width:100%}.w-max{width:max-content}.origin-\\\\[0\\\\],.origin-left{transform-origin:0}.-translate-y-5{--tw-translate-y: calc(var(--spacing) * -5);translate:var(--tw-translate-x) var(--tw-translate-y)}.-translate-y-6{--tw-translate-y: calc(var(--spacing) * -6);translate:var(--tw-translate-x) var(--tw-translate-y)}.-translate-y-\\\\[20px\\\\]{--tw-translate-y: -20px ;translate:var(--tw-translate-x) var(--tw-translate-y)}.scale-75{--tw-scale-x: 75%;--tw-scale-y: 75%;--tw-scale-z: 75%;scale:var(--tw-scale-x) var(--tw-scale-y)}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,)}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.appearance-none{appearance:none}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded-lg{border-radius:var(--radius-lg)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-400{background-color:var(--color-gray-400)}.bg-gray-500\\\\/50{background-color:color-mix(in srgb,oklch(55.1% .027 264.364) 50%,transparent);@supports (color: color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-gray-500) 50%,transparent)}}.bg-transparent{background-color:transparent}.bg-white{background-color:var(--color-white)}.p-2{padding:calc(var(--spacing) * 2)}.p-4{padding:calc(var(--spacing) * 4)}.px-1{padding-inline:calc(var(--spacing) * 1)}.px-2{padding-inline:calc(var(--spacing) * 2)}.px-3{padding-inline:calc(var(--spacing) * 3)}.px-4{padding-inline:calc(var(--spacing) * 4)}.py-1{padding-block:calc(var(--spacing) * 1)}.py-2{padding-block:calc(var(--spacing) * 2)}.font-medium{--tw-font-weight: var(--font-weight-medium);font-weight:var(--font-weight-medium)}.text-blue-700{color:var(--color-blue-700)}.text-gray-500{color:var(--color-gray-500)}.shadow-lg{--tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / .1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px var(--tw-shadow-color, rgb(0 0 0 / .1)), 0 8px 10px -6px var(--tw-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.blur{--tw-blur: blur(8px);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.backdrop-blur-lg{--tw-backdrop-blur: blur(var(--blur-lg));-webkit-backdrop-filter:var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease, var(--default-transition-timing-function));transition-duration:var(--tw-duration, var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease, var(--default-transition-timing-function));transition-duration:var(--tw-duration, var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease, var(--default-transition-timing-function));transition-duration:var(--tw-duration, var(--default-transition-duration))}.duration-200{--tw-duration: .2s;transition-duration:.2s}.duration-300{--tw-duration: .3s;transition-duration:.3s}.outline-none{--tw-outline-style: none;outline-style:none}.peer-placeholder-shown\\\\:translate-y-0{&:is(:where(.peer):placeholder-shown~*){--tw-translate-y: calc(var(--spacing) * 0);translate:var(--tw-translate-x) var(--tw-translate-y)}}.peer-placeholder-shown\\\\:scale-100{&:is(:where(.peer):placeholder-shown~*){--tw-scale-x: 100%;--tw-scale-y: 100%;--tw-scale-z: 100%;scale:var(--tw-scale-x) var(--tw-scale-y)}}.peer-placeholder-shown\\\\:opacity-0{&:is(:where(.peer):placeholder-shown~*){opacity:0%}}.peer-focus\\\\:-translate-y-5{&:is(:where(.peer):focus~*){--tw-translate-y: calc(var(--spacing) * -5);translate:var(--tw-translate-x) var(--tw-translate-y)}}.peer-focus\\\\:-translate-y-6{&:is(:where(.peer):focus~*){--tw-translate-y: calc(var(--spacing) * -6);translate:var(--tw-translate-x) var(--tw-translate-y)}}.peer-focus\\\\:-translate-y-\\\\[20px\\\\]{&:is(:where(.peer):focus~*){--tw-translate-y: -20px ;translate:var(--tw-translate-x) var(--tw-translate-y)}}.peer-focus\\\\:scale-75{&:is(:where(.peer):focus~*){--tw-scale-x: 75%;--tw-scale-y: 75%;--tw-scale-z: 75%;scale:var(--tw-scale-x) var(--tw-scale-y)}}.peer-focus\\\\:scale-\\\\[85\\\\%\\\\]{&:is(:where(.peer):focus~*){scale:85%}}.peer-focus\\\\:opacity-100{&:is(:where(.peer):focus~*){opacity:100%}}.hover\\\\:bg-blue-200{&:hover{@media(hover:hover){background-color:var(--color-blue-200)}}}.hover\\\\:bg-gray-100{&:hover{@media(hover:hover){background-color:var(--color-gray-100)}}}.hover\\\\:bg-gray-200{&:hover{@media(hover:hover){background-color:var(--color-gray-200)}}}}@property --tw-translate-x{syntax: \\\"*\\\"; inherits: false; initial-value: 0;}@property --tw-translate-y{syntax: \\\"*\\\"; inherits: false; initial-value: 0;}@property --tw-translate-z{syntax: \\\"*\\\"; inherits: false; initial-value: 0;}@property --tw-scale-x{syntax: \\\"*\\\"; inherits: false; initial-value: 1;}@property --tw-scale-y{syntax: \\\"*\\\"; inherits: false; initial-value: 1;}@property --tw-scale-z{syntax: \\\"*\\\"; inherits: false; initial-value: 1;}@property --tw-rotate-x{syntax: \\\"*\\\"; inherits: false;}@property --tw-rotate-y{syntax: \\\"*\\\"; inherits: false;}@property --tw-rotate-z{syntax: \\\"*\\\"; inherits: false;}@property --tw-skew-x{syntax: \\\"*\\\"; inherits: false;}@property --tw-skew-y{syntax: \\\"*\\\"; inherits: false;}@property --tw-border-style{syntax: \\\"*\\\"; inherits: false; initial-value: solid;}@property --tw-font-weight{syntax: \\\"*\\\"; inherits: false;}@property --tw-shadow{syntax: \\\"*\\\"; inherits: false; initial-value: 0 0 #0000;}@property --tw-shadow-color{syntax: \\\"*\\\"; inherits: false;}@property --tw-shadow-alpha{syntax: \\\"<percentage>\\\"; inherits: false; initial-value: 100%;}@property --tw-inset-shadow{syntax: \\\"*\\\"; inherits: false; initial-value: 0 0 #0000;}@property --tw-inset-shadow-color{syntax: \\\"*\\\"; inherits: false;}@property --tw-inset-shadow-alpha{syntax: \\\"<percentage>\\\"; inherits: false; initial-value: 100%;}@property --tw-ring-color{syntax: \\\"*\\\"; inherits: false;}@property --tw-ring-shadow{syntax: \\\"*\\\"; inherits: false; initial-value: 0 0 #0000;}@property --tw-inset-ring-color{syntax: \\\"*\\\"; inherits: false;}@property --tw-inset-ring-shadow{syntax: \\\"*\\\"; inherits: false; initial-value: 0 0 #0000;}@property --tw-ring-inset{syntax: \\\"*\\\"; inherits: false;}@property --tw-ring-offset-width{syntax: \\\"<length>\\\"; inherits: false; initial-value: 0px;}@property --tw-ring-offset-color{syntax: \\\"*\\\"; inherits: false; initial-value: #fff;}@property --tw-ring-offset-shadow{syntax: \\\"*\\\"; inherits: false; initial-value: 0 0 #0000;}@property --tw-blur{syntax: \\\"*\\\"; inherits: false;}@property --tw-brightness{syntax: \\\"*\\\"; inherits: false;}@property --tw-contrast{syntax: \\\"*\\\"; inherits: false;}@property --tw-grayscale{syntax: \\\"*\\\"; inherits: false;}@property --tw-hue-rotate{syntax: \\\"*\\\"; inherits: false;}@property --tw-invert{syntax: \\\"*\\\"; inherits: false;}@property --tw-opacity{syntax: \\\"*\\\"; inherits: false;}@property --tw-saturate{syntax: \\\"*\\\"; inherits: false;}@property --tw-sepia{syntax: \\\"*\\\"; inherits: false;}@property --tw-drop-shadow{syntax: \\\"*\\\"; inherits: false;}@property --tw-drop-shadow-color{syntax: \\\"*\\\"; inherits: false;}@property --tw-drop-shadow-alpha{syntax: \\\"<percentage>\\\"; inherits: false; initial-value: 100%;}@property --tw-drop-shadow-size{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-blur{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-brightness{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-contrast{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-grayscale{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-hue-rotate{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-invert{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-opacity{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-saturate{syntax: \\\"*\\\"; inherits: false;}@property --tw-backdrop-sepia{syntax: \\\"*\\\"; inherits: false;}@property --tw-duration{syntax: \\\"*\\\"; inherits: false;}@layer properties{@supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x: 0;--tw-translate-y: 0;--tw-translate-z: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-scale-z: 1;--tw-rotate-x: initial;--tw-rotate-y: initial;--tw-rotate-z: initial;--tw-skew-x: initial;--tw-skew-y: initial;--tw-border-style: solid;--tw-font-weight: initial;--tw-shadow: 0 0 #0000;--tw-shadow-color: initial;--tw-shadow-alpha: 100%;--tw-inset-shadow: 0 0 #0000;--tw-inset-shadow-color: initial;--tw-inset-shadow-alpha: 100%;--tw-ring-color: initial;--tw-ring-shadow: 0 0 #0000;--tw-inset-ring-color: initial;--tw-inset-ring-shadow: 0 0 #0000;--tw-ring-inset: initial;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-offset-shadow: 0 0 #0000;--tw-blur: initial;--tw-brightness: initial;--tw-contrast: initial;--tw-grayscale: initial;--tw-hue-rotate: initial;--tw-invert: initial;--tw-opacity: initial;--tw-saturate: initial;--tw-sepia: initial;--tw-drop-shadow: initial;--tw-drop-shadow-color: initial;--tw-drop-shadow-alpha: 100%;--tw-drop-shadow-size: initial;--tw-backdrop-blur: initial;--tw-backdrop-brightness: initial;--tw-backdrop-contrast: initial;--tw-backdrop-grayscale: initial;--tw-backdrop-hue-rotate: initial;--tw-backdrop-invert: initial;--tw-backdrop-opacity: initial;--tw-backdrop-saturate: initial;--tw-backdrop-sepia: initial;--tw-duration: initial}}}\\n\")","import { forwardRef, memo, useEffect } from \"react\";\nimport type { InputProps, InputRefProps } from \"../typeDeclaration/inputProps\";\nimport { useInputStore } from \"../hooks/useInputStore\";\nimport { useComputedExpression } from \"../hooks/useComputedExpression\";\nimport InputTemplate from \"./InputTemplate\";\nimport { handleInitialValue } from \"../Utils/setInitialValue\";\nimport { useFieldName } from \"../hooks/useFieldName\";\nimport { inputStore } from \"src/store/InputStore\";\n\n\nconst StrInput = forwardRef<InputRefProps, InputProps>(({\n    placeholder,\n    containerStyles = \"\",\n    onEnterPress,\n    onBlur,\n    onDisableChange,\n    maxLength,\n    autoFocus = false,\n    privacy = false,\n    disabled = false,\n    hideElement = false,\n    inputStyles,\n    placeholderStyles,\n    onChange,\n    initialValue = \"\",\n    name,\n    ...props\n}, ref) => {\n    // const scope = useNameScope();\n\n    // const localName = name || camelCase(placeholder);\n    // const modifiedName = scope ? `${scope}.${localName}` : localName;\n    const modifiedName = useFieldName(placeholder, name)\n\n    // const modifiedName = name || camelCase(placeholder);\n\n    useEffect(() => {\n        handleInitialValue(modifiedName, initialValue)\n    }, [])\n\n    // const value = useInputStore(state => state.inputData[modifiedName] ?? \"\")\n    const value: string = useInputStore(modifiedName) ?? \"\"\n\n    const disabledValue: boolean = useComputedExpression(disabled, modifiedName)\n\n    const hiddenValue: boolean = useComputedExpression(hideElement)\n\n    useEffect(() => {\n        // inputStore.currentValue = value\n        onChange?.(value)  // Pass null as no event.data\n    }, [value])\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        // const nativeEvent = e.nativeEvent as unknown as InputEvent; // Type assertion to InputEvent\n        // onChange?.(changedValue, nativeEvent.data);\n        inputStore.setValue(modifiedName, e.target.value)\n    }\n\n\n    return (\n        <div style={{ display: hiddenValue ? 'none' : 'block' }}>\n            <InputTemplate\n                ref={ref}\n                name={modifiedName}\n                value={value}\n                handleChange={handleChange}\n                onEnterPress={onEnterPress}\n                disabled={disabledValue}\n                // hideElement={hiddenValue}\n                onBlur={onBlur}\n                autoFocus={autoFocus}\n                maxLength={maxLength}\n                placeholder={placeholder}\n                type={privacy ? 'password' : 'text'}\n                containerStyles={containerStyles}\n                inputStyles={inputStyles}\n                placeholderStyles={placeholderStyles}\n                {...props}\n            />\n        </div>\n    );\n});\n\n// 1. Export the memoized component\nconst MemoizedStrInput = memo(StrInput)\n\n// 2. Set the displayName on the exported component\nMemoizedStrInput.displayName = 'StrInput';\n\nexport default MemoizedStrInput;\n\n\n\n\n// import React, { FC, memo, useCallback, useEffect, useRef } from 'react';\n// import { useInputStore } from 'src/hooks/useInputStore';\n// import InputTemplate from './InputTemplate';\n// import { FullInputProps, InputProps } from 'src/typeDeclaration/inputProps';\n// import { getNestedValue } from 'src/Utils/inputStoreUtils';\n// import { useComputedExpression } from 'src/hooks/useComputedExpression';\n// import { useFormInitials } from 'src/hooks/useFormInitialState';\n\n\n// const StrInput: FC<InputProps> = ({\n//     placeholder,\n//     containerStyles = \"\",\n//     onEnterPress = () => { },\n//     onBlur = () => { },\n//     onDisableChange,\n//     maxLength,\n//     privacy = false,\n//     disabled = false,\n//     hideElement = false,\n//     inputStyles,\n//     placeholderStyles,\n//     onChange = () => { },\n//     initialValue = \"\",\n//     name,\n//     ...props\n// }) => {\n//     const fullProps = props as FullInputProps\n\n//     const value: string = useInputStore(\n//         (state) => {\n//             if (fullProps.isArrayObject) {\n//                 const arrData = fullProps.arrayData!;\n//                 return (\n//                     state.inputData[arrData.arrayName]?.[arrData.arrayIndex]?.[name!] ?? \"\"\n//                 );\n//             }\n//             return getNestedValue(state.inputData, name!) ?? \"\"\n//             // return state.inputData[name] ?? \"\";\n//         }\n//     );\n    \n//     const handleOnDisableChange = useCallback((value: any) => {\n//         useFormInitials({ [name!]: value })\n//     }, [name])\n\n//     const disabledValue: boolean = useComputedExpression(disabled, name!)\n\n//     const hiddenValue: boolean = useComputedExpression(hideElement, name!)\n\n\n//     useEffect(() => {\n//         if (onDisableChange) {\n//             const { inputData } = useInputStore.getState()\n//             const currentDisabled = getNestedValue(inputData, name)\n//             onDisableChange({\n//                 state: disabledValue,\n//                 disabledKey: name,\n//                 disabledValue: currentDisabled,\n//                 storeValue: inputData,\n//                 setValue: handleOnDisableChange\n//             })\n//         }\n//     }, [disabledValue])\n\n//     const prevValueRef = useRef(value)\n\n//     useEffect(() => {\n//         if (value !== prevValueRef.current) {\n//             prevValueRef.current = value\n//             if (value !== \"\") {\n//                 onChange(value, null)  // Pass null as no event.data\n//             }\n//         }\n//     }, [value])\n\n//     const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n//         const changedValue = e.target.value;\n//         const nativeEvent = e.nativeEvent as unknown as InputEvent; // Type assertion to InputEvent\n//         onChange(changedValue, nativeEvent.data);\n//         fullProps.onInputChange(name!, e.target.value);\n//     }\n\n//     return (\n//         <div style={{ display: hiddenValue ? 'none' : 'block' }}>\n//             <InputTemplate\n//                 name={name!}\n//                 value={value}\n//                 handleChange={handleChange}\n//                 onEnterPress={onEnterPress}\n//                 disabled={disabledValue}\n//                 hideElement={hiddenValue}\n//                 onBlur={onBlur}\n//                 maxLength={maxLength}\n//                 placeholder={placeholder}\n//                 type={privacy ? 'password' : 'text'}\n//                 containerStyles={containerStyles}\n//                 inputStyles={inputStyles}\n//                 placeholderStyles={placeholderStyles}\n//                 {...props}\n//             />\n//         </div>\n//     );\n// };\n\n// // 1. Export the memoized component\n// const MemoizedStrInput = memo(StrInput)\n\n// // 2. Set the displayName on the exported component\n// MemoizedStrInput.displayName = 'StrInput';\n\n// export default MemoizedStrInput;","import { useEffect, useRef, useSyncExternalStore } from 'react'\nimport { inputStore } from 'src/store/InputStore';\n\nexport function useInputStore(key: string) {\n  const valueRef = useRef(\"\")\n  const initialRender = useRef(true)\n  useEffect(() => {\n    setTimeout(() => {\n      initialRender.current = false\n    }, 200);\n  }, [])\n  return useSyncExternalStore(\n    (listener) => inputStore.subscribe(key, listener),\n    () => {\n      if (initialRender.current) {\n        if (valueRef.current === inputStore.getInputNestedValue(key)) return valueRef.current\n      }\n      if (valueRef.current === inputStore.currentValue) return valueRef.current\n      const value = inputStore.getHookValue(key)\n      valueRef.current = value\n      return value\n    }\n  )\n}\n","const isEmptyObject = (obj : object) => Object.keys(obj).length === 0\n\nconst isArray = (arr : any) => Array.isArray(arr)\n\nconst isPlainObject = (obj : Record<string, any>) => typeof obj === 'object' && obj !== null && !isArray(obj);\n\nconst isEmptyArray = (arr : any[]) => arr.length === 0\n\nconst isDateType = (input : any) => !isNaN(new Date(input).getTime());\n\nconst isNumber = (str : string) => /^\\d+\\.?\\d*$/.test(str)\n\nexport {isEmptyObject, isArray, isEmptyArray, isPlainObject, isDateType, isNumber}","// export function getNestedValue(obj: any, path: any): any {\n//     if (!path || typeof path !== \"string\") return undefined; // <-- prevent crash\n//     if (!path.includes(\".\")) return obj[path]\n//     return path.split('.').reduce((acc, key) => acc?.[key], obj);\n// }\n\nexport function getNestedValue(obj: any, path: string) {\n  return path.split('.').reduce((curr, key) => {\n    if (curr == null) return undefined\n    return isIndex(key) ? curr[Number(key)] : curr[key]\n  }, obj)\n}\n\n\nexport const isIndex = (key: string) => {\n  return key !== \"\" && !isNaN(Number(key))\n}","import { isArray } from \"src/functions/dataTypesValidation\"\r\nimport { isIndex } from \"src/Utils/inputStoreUtils\"\r\n\r\ntype Listener = () => void\r\n\r\nclass InputStore {\r\n  private rawData = {} as Record<string, any>\r\n  private state = {\r\n    inputData: null as Record<string, any> | null,\r\n    initialData: null as Record<string, any> | null,\r\n    editedKeys: new Set<string>()\r\n  }\r\n\r\n  // refData = null as Record<string, any> | null\r\n  sharedContext = new Map<string, any>()     /////// this will be used to share data between inputs which do not involve in inputData(for side effects)\r\n\r\n\r\n  private isBatching = false\r\n  private pendingKeys = new Set<string>()\r\n\r\n\r\n  currentValue = \"\"\r\n\r\n  private _isEditMode = false;\r\n\r\n  set isEditMode(value: boolean) {\r\n    if (this._isEditMode !== value) {\r\n      this._isEditMode = value;\r\n      \r\n      // // RUN YOUR METHOD HERE\r\n      this.state.initialData = {}\r\n    }\r\n  }\r\n\r\n  get isEditMode() {\r\n    return this._isEditMode\r\n  }\r\n  \r\n  backgroundColor = 'white'\r\n\r\n  private listeners = new Map<string, Set<Listener>>()     /////// can fix this. can do new Map<string, Listener>() instead.\r\n\r\n  subscribe(key: string, listener: Listener) {\r\n    if (!this.listeners.has(key)) {\r\n      this.listeners.set(key, new Set())\r\n    }\r\n\r\n    this.listeners.get(key)!.add(listener)\r\n\r\n    return () => {\r\n      this.listeners.get(key)?.delete(listener)\r\n    }\r\n  }\r\n\r\n  private notify(key: string | string[]) {\r\n    if (isArray(key)) {\r\n      key.forEach(k => this.notify(k))\r\n      return\r\n    }\r\n\r\n    if (this.isBatching) {\r\n      this.pendingKeys.add(key)\r\n      return\r\n    }\r\n\r\n    this.listeners.get(key)?.forEach(l => l())\r\n  }\r\n\r\n  private notifyAll() {\r\n    this.listeners.forEach(i => i.forEach(l => l()))\r\n  }\r\n\r\n  batch(fn: () => void) {\r\n  this.isBatching = true\r\n  fn()\r\n  this.isBatching = false\r\n\r\n  this.pendingKeys.forEach(k => {\r\n    this.listeners.get(k)?.forEach(l => l())\r\n  })\r\n  this.pendingKeys.clear()\r\n}\r\n\r\n\r\n\r\n  getSnapshot = () => {\r\n    return this.state\r\n  }\r\n\r\n  initializeInputStore(mode : \"edit\" | \"default\") {\r\n    this.state.inputData = {}\r\n    if (mode === \"edit\") this.isEditMode = true\r\n  }\r\n\r\n  setBackgroundColor(color: string) {\r\n    this.backgroundColor = color\r\n  }\r\n\r\n  setEditData(data: Record<string, any>) {\r\n    if (!this.isEditMode) return\r\n    // const keys = Object.keys(data)\r\n    \r\n    // const paths = collectPaths(data)\r\n    this.batch(() => {\r\n      this.state = {\r\n        inputData: structuredClone(data),\r\n        initialData: structuredClone(data),\r\n        editedKeys: new Set()\r\n      }\r\n      this.collectKeys(data)\r\n    })\r\n  }\r\n\r\n  private collectKeys(\r\n    obj: Record<string, any>,\r\n    prefix = \"\",\r\n    paths: string[] = []\r\n  ) {\r\n    for (const key in obj) {\r\n      const value = obj[key]\r\n      const path = prefix ? `${prefix}.${key}` : key\r\n      \r\n      if (\r\n        typeof value === \"object\" &&\r\n        value !== null &&\r\n        !Array.isArray(value)\r\n      ) {\r\n        this.collectKeys(value, path, paths)\r\n      } else if (isArray(value)) {\r\n        this.arrayItems.set(path, [...value])\r\n        this.notify(path)\r\n        for (let i = 0; i < value.length; i++) {\r\n          this.collectKeys(value[i], `${path}.${i}`, paths)\r\n        }\r\n      }\r\n      else {\r\n        if (this.listeners.has(path)) {\r\n          this.currentValue = value\r\n          this.notify(path) // queued because batching = true\r\n        }\r\n        // paths.push(path)\r\n      }\r\n    }\r\n  }\r\n\r\n  setFieldInitialData (key: string, value: any, isDisabledInput?: boolean) {\r\n    this.setNestedValue(this.state.inputData, key, value)\r\n    if (isDisabledInput) {\r\n      this.setNestedValue(this.rawData, key, value)\r\n    } else {\r\n      this.setNestedValue(this.rawData, key, \"\")\r\n    }\r\n    if (this.isEditMode) {\r\n      this.setNestedValue(this.state.initialData, key, value)\r\n    }\r\n    this.currentValue = value\r\n    this.notify(key)\r\n  }\r\n\r\n  setValue(key: string, value: any) {\r\n    const inputData = this.state.inputData\r\n    if (!inputData) return\r\n    this.currentValue = value\r\n    const prev = this.getNestedValue(inputData, key)\r\n    this.setNestedValue(inputData, key, value)\r\n    if (prev !== value) {\r\n      this.notify(key)\r\n    }\r\n    if (!this.isEditMode) return\r\n    // const initialData = this.state.initialData\r\n    // if (initialData![key] === undefined) this.setNestedValue(initialData, key, value)\r\n    const initial = this.getNestedValue(this.state.initialData, key)\r\n    if (initial === undefined) this.setNestedValue(this.state.initialData, key, value)\r\n    if (value !== initial) this.state.editedKeys.add(key)\r\n    else this.state.editedKeys.delete(key)\r\n  }\r\n\r\n  getValue(key: string) {\r\n    return this.getNestedValue(this.state.inputData, key)\r\n  }\r\n  getHookValue(key: string) {\r\n    const hookValue = this.getNestedValue(this.state.inputData, key)\r\n    return hookValue\r\n  }\r\n\r\n  reset(nextData?: Record<string, any>) {\r\n    return (key?: string | string[]) => {\r\n      if (key) {\r\n        if (typeof key === \"string\") {\r\n          this.setValue(key, \"\")\r\n          return\r\n        }\r\n        if (isArray(key)) {\r\n          key.forEach(k => this.setValue(k, \"\"))\r\n          return\r\n        }\r\n      }\r\n      const data = structuredClone(nextData ?? this.rawData ?? {})\r\n      this.state = {\r\n        inputData: data,\r\n        initialData: this.isEditMode ? structuredClone(data) : null,\r\n        editedKeys: new Set()\r\n      }\r\n      this.currentValue = \"\"\r\n      this.sharedContext.clear()\r\n      this.arrayItems.clear()\r\n      this.notifyAll()\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.state = {\r\n      inputData: null,\r\n      initialData: null,\r\n      editedKeys: new Set()\r\n    }\r\n    this.currentValue = \"\"\r\n    this.sharedContext.clear()\r\n    this.arrayItems.clear()\r\n  }\r\n\r\n  private setNestedValue(obj: any, path: string, value: any) {\r\n    const keys = path.split('.')\r\n    let curr = obj\r\n\r\n    for (let i = 0; i < keys.length - 1; i++) {\r\n      const key = keys[i]\r\n      const nextKey = keys[i + 1]\r\n\r\n      // Decide container type for current key\r\n      if (isIndex(key)) {\r\n        const index = Number(key)\r\n        if (!Array.isArray(curr)) {\r\n          throw new Error(`Expected array at ${keys.slice(0, i).join('.')}`)\r\n        }\r\n        curr[index] ??= isIndex(nextKey) ? [] : {}\r\n        curr = curr[index]\r\n      } else {\r\n        curr[key] ??= isIndex(nextKey) ? [] : {}\r\n        curr = curr[key]\r\n      }\r\n    }\r\n\r\n    const lastKey = keys.at(-1)!\r\n\r\n    if (isIndex(lastKey)) {\r\n      if (!Array.isArray(curr)) {\r\n        throw new Error(`Expected array at ${keys.slice(0, -1).join('.')}`)\r\n      }\r\n      curr[Number(lastKey)] = value\r\n    } else {\r\n      curr[lastKey] = value\r\n    }\r\n  }\r\n\r\n  private getNestedValue(obj: any, path: string) {\r\n    return path.split('.').reduce((curr, key) => {\r\n      if (curr == null) return undefined\r\n      return isIndex(key) ? curr[Number(key)] : curr[key]\r\n    }, obj)\r\n  }\r\n\r\n  getInputNestedValue(path: string) {\r\n    return this.getNestedValue(this.state.inputData, path)\r\n  }\r\n\r\n  private arrayItems = new Map<string, any[]>()   ////// arraycontainer and items. it has nothing to do with inputs inside arraycontainer. which means it stores supposedly playLink -> [data1, data2, data3] just to map and do not store playLink.0 or playLink.0.host\r\n\r\n  getArrayItems(path: string) {\r\n    const arr = this.arrayItems.get(path)\r\n    return arr\r\n  }\r\n\r\n  addArrayItem(path: string, value: any) {\r\n    const prev = this.arrayItems.get(path) ?? []\r\n\r\n    \r\n    const next = Array.isArray(value)\r\n    ? [...prev, ...value]\r\n    : [...prev, value]\r\n    \r\n    this.arrayItems.set(path, next)\r\n    this.notify(path)\r\n  }\r\n\r\n  removeArrayItem(path: string, index: number) {\r\n    const prev = this.arrayItems.get(path)\r\n    if (!Array.isArray(prev)) return\r\n\r\n    const next = prev.filter((_, i) => i !== index)\r\n    this.arrayItems.set(path, next)\r\n\r\n    this.notify(path)\r\n  }\r\n  \r\n  //// this is to solve the problem of inputs inside arraycontainer which can change with setEditData. like if setEditData increases arrayItems from backend it will show replace and show the updated data in ui\r\n  private hydrateArrays(obj: any, prefix = '') {\r\n  for (const key in obj) {\r\n    const value = obj[key]\r\n    const path = prefix ? `${prefix}.${key}` : key\r\n\r\n    if (Array.isArray(value)) {\r\n      // ðŸ”¥ THIS IS THE KEY LINE\r\n      this.arrayItems.set(path, [...value])\r\n      this.notify(path)\r\n\r\n      // recurse into array objects\r\n      value.forEach((item, index) => {\r\n        if (typeof item === 'object' && item !== null) {\r\n          this.hydrateArrays(item, `${path}.${index}`)\r\n        }\r\n      })\r\n    }\r\n\r\n    else if (typeof value === 'object' && value !== null) {\r\n      this.hydrateArrays(value, path)\r\n    }\r\n  }\r\n}\r\n\r\n}\r\n\r\nexport const inputStore = new InputStore()\r\n\r\n\r\n\r\n  // private notify(key: string | string[]) {\r\n  //   if (isArray(key)) return key.forEach(k => this.notify(k))\r\n  //   this.listeners.get(key)?.forEach(l => l())\r\n  // }\r\n\r\n\r\n      // for (const key of paths) {\r\n      //   // inputStore.setValue(key, data[key])\r\n      //   if (this.listeners.has(key)) {\r\n      //     this.currentValue = data[key]\r\n      //     this.notify(key) // queued because batching = true\r\n      //   }\r\n      // }\r\n\r\n\r\n  // private setNestedValue(obj: any, path: string, value: any) {\r\n  //   const keys = path.split('.')\r\n  //   let curr = obj\r\n  //   for (let i = 0; i < keys.length - 1; i++) {\r\n  //     curr[keys[i]] ??= {}\r\n  //     curr = curr[keys[i]]\r\n  //   }\r\n  //   curr[keys.at(-1)!] = value\r\n  // }\r\n\r\n\r\n\r\n\r\n// private getNestedValue(obj: any, path: string) {\r\n//   return path.split('.').reduce((a, c) => a?.[c], obj)\r\n// }\r\n\r\n\r\n\r\n/////////   above code allows to set the value only if user uses InputContainer. and also reuse of this.state.inputData is ensured\r\n// setValue(key: string, value: any) {\r\n//     const prev = this.getValue(key)\r\n//     this.setNestedValue(this.state.inputData, key, value)\r\n//     if (prev !== value) {\r\n//       this.notify(key)\r\n//     }\r\n//     const initialData = this.state.initialData\r\n//     if (!initialData) return\r\n//     const initial = this.getNestedValue(initialData, key)\r\n//     if (value !== initial) this.state.editedKeys.add(key)\r\n//     else this.state.editedKeys.delete(key)\r\n//   }\r\n\r\n\r\n\r\n\r\n// type Listener = () => void\r\n\r\n// class InputStore {\r\n//   private state = {\r\n//     inputData: null as Record<string, any> | null,\r\n//     initialData: null as Record<string, any> | null,\r\n//     editedKeys: new Set<string>()\r\n//   }\r\n  \r\n//   backgroundColor = 'white'\r\n\r\n//   private listeners = new Set<Listener>()\r\n\r\n//   subscribe = (listener: Listener) => {\r\n//     this.listeners.add(listener)\r\n//     return () => this.listeners.delete(listener)\r\n//   }\r\n\r\n//   private notify() {\r\n//     this.listeners.forEach(l => l())\r\n//   }\r\n\r\n//   getSnapshot = () => {\r\n//     return this.state\r\n//   }\r\n\r\n//   initializeInputStore() {\r\n//     this.state.inputData = {}\r\n//   }\r\n\r\n//   setInitialData(data: Record<string, any>) {\r\n//     this.state = {\r\n//       inputData: structuredClone(data),\r\n//       initialData: structuredClone(data),\r\n//       editedKeys: new Set()\r\n//     }\r\n//     this.notify()\r\n//   }\r\n\r\n//   setBackgroundColor(color: string) {\r\n//     this.backgroundColor = color\r\n//   }\r\n\r\n//   setValue(key: string, value: any) {\r\n//     const prev = this.getValue(key)\r\n//     this.setNestedValue(this.state.inputData, key, value)\r\n\r\n//     const initial = this.getNestedValue(this.state.initialData, key)\r\n//     if (value !== initial) this.state.editedKeys.add(key)\r\n//     else this.state.editedKeys.delete(key)\r\n\r\n//     if (prev !== value) this.notify()\r\n//   }\r\n\r\n//   getValue(key: string) {\r\n//     return this.getNestedValue(this.state.inputData, key)\r\n//   }\r\n\r\n//   reset() {\r\n//     this.state = {\r\n//       inputData: {},\r\n//       initialData: {},\r\n//       editedKeys: new Set()\r\n//     }\r\n//     this.notify()\r\n//   }\r\n\r\n//   private setNestedValue(obj: any, path: string, value: any) {\r\n//     const keys = path.split('.')\r\n//     let curr = obj\r\n//     for (let i = 0; i < keys.length - 1; i++) {\r\n//       curr[keys[i]] ??= {}\r\n//       curr = curr[keys[i]]\r\n//     }\r\n//     curr[keys.at(-1)!] = value\r\n//   }\r\n\r\n//   private getNestedValue(obj: any, path: string) {\r\n//     return path.split('.').reduce((a, c) => a?.[c], obj)\r\n//   }\r\n// }\r\n\r\n// export const inputStore = new InputStore()","import { useSyncExternalStore } from \"react\"\nimport { compileExpression } from \"../Utils/expressionHelper\"\nimport { inputStore } from \"src/store/InputStore\"\n\nexport function useComputedExpression(expr?: boolean | string, name?: string) : boolean {\n  if (expr === undefined) return false\n  if (typeof expr === 'boolean') return expr\n\n  const { deps, evaluate } = compileExpression(expr)\n  // const { deps, evaluate } = useMemo(() => compileExpression(expr), [expr]);\n\n\n  const result = useSyncExternalStore(\n    (cb) => {\n      const unsubscribers = deps.map(k =>\n        inputStore.subscribe(k, cb)\n      )\n      return () => unsubscribers.forEach(u => u())\n    },\n    () => {\n      const val = evaluate(inputStore.getSnapshot().inputData ?? {})\n      return val\n    }\n  )\n\n  // return evaluate(inputStore.getSnapshot().inputData ?? {})\n  return result\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import { useCallback, useMemo, useRef } from \"react\";\n// import { evalExpression, parseExpression } from \"../Utils/expressionHelper\";\n// import { useInputStore } from \"./useInputStore\";\n\n// /**\n//  * Hook to subscribe & evaluate any expression-based prop\n//  * Example: disabled=\"${age} >= 18 && ${citizen} === true\"\n//  */\n// export function useComputedExpression(propValue : string | boolean, name: string) {\n//     if (name === undefined) return\n//     const lastComputedRef = useRef<boolean | null>(null)\n//     // 1) Parse only once\n//     const parsed = useMemo(() => {\n//         if (typeof propValue === \"boolean\") return null;\n//         return parseExpression(propValue);\n//     }, [propValue]);\n\n//     if (typeof propValue === \"boolean\") {\n//         return propValue;\n//     }\n\n\n//     // 2) Zustand subscription only on dependencies\n//     const computedValue = useInputStore(\n//         useCallback((state) => {\n//             if (typeof propValue === \"boolean\"  || typeof parsed === \"boolean\") return propValue;\n\n//             if (lastComputedRef.current !== null && !parsed.deps.includes(state.currentInputKey)) {\n//                 return lastComputedRef.current;\n//             }\n            \n//             const result = evalExpression(\n//                 parsed.template,\n//                 parsed.deps,\n//                 state.inputData,\n//             );\n//             lastComputedRef.current = result;\n//             return result;\n//         }, [parsed])\n//     );\n//     return computedValue;\n// }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import { useCallback, useMemo, useRef } from \"react\";\n// import { evalExpression, parseExpression } from \"src/Utils/expressionHelper\";\n// import { useInputStore } from \"./useInputStore\";\n// import { shallow } from \"zustand/shallow\";\n// import { getNestedValue } from \"src/Utils/inputStoreUtils\";\n\n// /**\n//  * Hook to subscribe & evaluate any expression-based prop\n//  * Example: disabled=\"${age} >= 18 && ${citizen} === true\"\n//  */\n// export function useComputedExpression(propValue : string | boolean) {\n//     const lastComputedRef = useRef<boolean | null>(null)\n//     // 1) Parse only once\n//     const parsed = useMemo(() => {\n//         if (typeof propValue === \"boolean\") return null;\n//         return parseExpression(propValue);\n//     }, [propValue]);\n\n//     if (typeof propValue === \"boolean\") {\n//         return propValue;\n//     }\n\n\n//     // 2) Zustand subscription only on dependencies\n//     const computedValue = useInputStore(\n//         useCallback((state) => {\n//             if (typeof propValue === \"boolean\"  || typeof parsed === \"boolean\") return propValue;\n\n//             const inputData = state.inputData;\n//             const currentInputKey = state.currentInputKey;\n//             const isLastComputedValid = lastComputedRef.current !== null;\n//             if (isLastComputedValid && !parsed.deps.includes(currentInputKey)) {\n//                 return lastComputedRef.current;\n//             }\n//             const currentValue = getNestedValue(inputData, currentInputKey);\n//             if (isLastComputedValid && !currentValue) {\n//                 return lastComputedRef.current;\n//             }\n//             // if (isLastComputedValid && !inputData[currentInputKey]) {\n//             //     return lastComputedRef.current;\n//             // }\n//             return evalExpression(\n//                 parsed.template,\n//                 parsed.deps,\n//                 state.inputData,\n//                 lastComputedRef\n//             );\n//         }, [parsed])\n//     );\n\n//     return computedValue;\n// }\n","import { getNestedValue } from \"./inputStoreUtils\";\n\nconst expressionCache = new Map();\n\nexport function evalExpression(template: string, deps: string[], store: any) {\n    let expr = template;\n\n    for (let key of deps) {\n        const value = getByPath(store, key);\n        expr = expr.replace(\"${\" + key + \"}\", JSON.stringify(value));\n    }\n\n\n    try {\n        return Function(`\"use strict\"; return (${expr});`)();\n    } catch (e) {\n        return false;\n    }\n}\n\ntype CompiledExpression = {\n    deps: string[]\n    evaluate: (data: Record<string, any>) => boolean\n}\n\nconst expressionCacheNew = new Map<string, CompiledExpression>()\n\n\nexport function compileExpression(expr: string): CompiledExpression {\n    if (expressionCacheNew.has(expr)) {\n        return expressionCacheNew.get(expr)!\n    }\n\n    const deps: string[] = []\n\n    const jsExpr = expr.replace(/\\$\\{(.*?)\\}/g, (_, key) => {\n        deps.push(key)\n        return `get(data, \"${key}\")`;\n        // return `data[\"${key}\"]`\n    })\n\n\n    const fn = new Function(\n        'data',\n        'get',\n        `try { return Boolean(${jsExpr}) } catch { return false }`\n    ) as (data: any, get: (obj: any, path: string) => any) => boolean\n\n    const compiled = {\n        deps,\n        evaluate: (data: any) => fn(data, getNestedValue)\n    }\n    //   const compiled = { deps, evaluate: fn }\n    expressionCacheNew.set(expr, compiled)\n    return compiled\n}\n\n\nexport function getByPath(obj: any, path: string) {\n    return path.split(\".\").reduce((acc, key) => {\n        if (!acc) return undefined;\n        return acc[key];\n    }, obj);\n}\n\nexport function parseExpression(expr: string): { deps: string[], template: string } {\n    if (expressionCache.has(expr)) return expressionCache.get(expr);\n\n    const regex = /\\$\\{([^}]+)\\}/g;\n    const deps = [];\n    let template = expr;\n\n    let match;\n    while ((match = regex.exec(expr))) {\n        const dep = match[1].trim();\n        deps.push(dep);\n    }\n\n    const result = { deps, template };\n    expressionCache.set(expr, result);\n    return result;\n}","import React, { type ComponentProps, forwardRef, memo, useImperativeHandle, useLayoutEffect, useRef, useState } from 'react'\nimport type { InputRefProps } from '../typeDeclaration/inputProps'\nimport { inputStore } from 'src/store/InputStore'\n\ninterface FullTemplateProps {\n    name: string\n    type: ComponentProps<'input'>['type']\n    placeholder: string\n    autoFocus?: boolean\n    maxLength?: number\n    onBlur?: (args: { currentValue?: string, allData?: Record<string, any> }) => void\n    onFocus?: (key: string) => void\n    onEnterPress?: (args: { currentValue?: string, allData?: Record<string, any> }) => void\n    disabled?: boolean\n    hideElement?: boolean\n    value: string\n    handleChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    containerStyles?: string\n    inputStyles?: string\n    placeholderStyles?: string\n    // bgColor: string\n    sharedStyles?: {\n        placeholderStyles?: string\n        [key: string]: any\n    }\n}\n\ntype TemplateProps = Omit<FullTemplateProps, \"sharedStyles\" | \"bgColor\">\n\nconst InputTemplate = forwardRef<InputRefProps, TemplateProps>(({\n    name,\n    type,\n    placeholder,\n    maxLength,\n    value,\n    onBlur,\n    autoFocus,\n    onEnterPress,\n    onFocus,\n    disabled = false,\n    hideElement = false,\n    handleChange = () => { },\n    containerStyles = \"\",\n    inputStyles = \"\",\n    placeholderStyles = \"\",\n    ...props\n}, ref) => {\n    // const setFocusInputKey = useInputStore((state) => state.setCurrentInputKey);\n    const pattern = /border-(\\d+|\\[([^\\]]+)\\])/\n    const inputRef = useRef<HTMLInputElement>(null)\n    const match = inputStyles.match(pattern)\n    const dynamicHeight = match ? (match[2] ? match[2] : `${match[1]}px`) : undefined;\n    const labelRef = useRef<any>(\"\")\n    const bgColor = inputStore.backgroundColor\n    const handlePreInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const evalue = e.target.value\n        // inputStore.currentValue = evalue\n        if (maxLength && evalue.length == maxLength + 1) {\n            return\n        }\n        // inputStore.setValue(name, e.target.value)\n        handleChange(e)\n    }\n\n    useImperativeHandle(ref, () => ({\n        focus: () => {\n            inputRef.current?.focus()\n        },\n        blur: () => {\n            inputRef.current?.blur()\n        },\n        reset: () => {\n            inputStore.reset()(name)\n        }\n    }))\n\n    const handleBlur = () => {\n        const data = inputStore.getSnapshot().inputData\n        onBlur?.({ currentValue: value ?? \"\", allData: data as Record<string, any> })\n    }\n    const handleFocus = () => {\n        onFocus?.(name)\n    }\n    const handleKeyPresses = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === 'Enter') {\n            const data = inputStore.getSnapshot()\n            onEnterPress?.({ currentValue: value ?? \"\", allData: data as Record<string, any> })\n        }\n    }\n    const [labelWidth, setLabelWidth] = useState<number | null>(null);\n\n    useLayoutEffect(() => {\n        if (labelRef.current) {\n            setLabelWidth(labelRef.current.offsetWidth);\n        }\n    }, [value, placeholder, hideElement]);\n    return (\n        <div className={`relative w-full group ${containerStyles}`} /* onFocus={() => setFocusInputKey(name)} */>\n            <input\n                type={type}\n                id={`floating_input_${name}`}\n                ref={inputRef}\n                onBlur={handleBlur}\n                onFocus={handleFocus}\n                value={value}\n                maxLength={maxLength}\n                autoFocus={autoFocus}\n                onKeyDown={handleKeyPresses}\n                onChange={handlePreInput}\n                className={`py-2 px-2 border-2 w-full outline-none rounded-lg bg-transparent appearance-none peer ${inputStyles}`}\n                placeholder=\" \"\n                disabled={disabled}\n                required\n            />\n            {labelWidth && (\n                <div\n                    className='absolute top-0 left-4 peer-focus:opacity-100 peer-placeholder-shown:opacity-0 transition-opacity duration-200'\n                    style={{\n                        height: dynamicHeight || 2,\n                        width: labelWidth * 0.75 + 8,\n                        backgroundColor: bgColor || 'white'\n                    }}\n                />\n            )}\n            <label\n                ref={labelRef}\n                htmlFor={`floating_input_${name}`}\n                className={`\n                    absolute left-5 duration-300 transform -translate-y-5 scale-75 top-2 origin-left\n                    peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0\n                    peer-focus:scale-75 peer-focus:-translate-y-5\n                    ${(props as FullTemplateProps).sharedStyles?.placeholderStyles || ''} ${placeholderStyles}\n                    `}\n            >\n                {placeholder}\n            </label>\n        </div>\n    )\n})\n\nexport default memo(InputTemplate)\n\n\n\n\n\n// import React, { ComponentProps, memo, useLayoutEffect, useRef, useState } from 'react'\n// import { useInputStore } from 'src/hooks/useInputStore'\n// import { inputStore } from 'src/InputStore'\n\n// interface FullTemplateProps {\n//     name: string\n//     type: ComponentProps<'input'>['type']\n//     placeholder: string\n//     maxLength?: number\n//     onBlur?: (args: { currentValue: string, allData: Record<string, any> }) => void\n//     onEnterPress?: (args: { currentValue: string, allData: Record<string, any> }) => void\n//     disabled?: boolean\n//     hideElement?: boolean\n//     value: string\n//     handleChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n//     containerStyles?: string\n//     inputStyles?: string\n//     placeholderStyles?: string\n//     // bgColor: string\n//     sharedStyles?: {\n//         placeholderStyles?: string\n//         [key: string]: any\n//     }\n// }\n\n// type TemplateProps = Omit<FullTemplateProps, \"sharedStyles\" | \"bgColor\">\n\n// const InputTemplate: React.FC<TemplateProps> = ({\n//     name,\n//     type,\n//     placeholder,\n//     maxLength,\n//     value,\n//     onBlur = () => { },\n//     onEnterPress = () => { },\n//     disabled = false,\n//     hideElement = false,\n//     handleChange = () => { },\n//     containerStyles = \"\",\n//     inputStyles = \"\",\n//     placeholderStyles = \"\",\n//     ...props\n// }) => {\n//     const setFocusInputKey = useInputStore((state) => state.setCurrentInputKey);\n//     const pattern = /border-(\\d+|\\[([^\\]]+)\\])/\n//     const match = inputStyles.match(pattern)\n//     const dynamicHeight = match ? (match[2] ? match[2] : `${match[1]}px`) : undefined;\n//     const labelRef = useRef<any>(\"\")\n//     const bgColor = inputStore.backgroundColor\n//     const handlePreInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n//         const evalue = e.target.value\n//         if (maxLength && evalue.length == maxLength + 1) {\n//             return\n//         }\n//         handleChange(e)\n//     }\n//     const handleBlur = () => {\n//         const { inputData: data } = useInputStore.getState()\n//         onBlur({currentValue : value, allData : data})\n//     }\n//     const handleKeyPresses = (event: React.KeyboardEvent<HTMLInputElement>) => {\n//         if (event.key === 'Enter') {\n//             const { inputData: data } = useInputStore.getState()\n//             onEnterPress({currentValue : value, allData : data})\n//         }\n//     }\n//     const [labelWidth, setLabelWidth] = useState<number | null>(null);\n\n//     useLayoutEffect(() => {\n//         if (labelRef.current) {\n//             setLabelWidth(labelRef.current.offsetWidth);\n//         }\n//     }, [value, placeholder, hideElement]);\n//     return (\n//         <div className={`relative w-full group ${containerStyles}`} onFocus={() => setFocusInputKey(name)}>\n//             <input\n//                 type={type}\n//                 id={`floating_input_${name}`}\n//                 onBlur={handleBlur}\n//                 value={value}\n//                 maxLength={maxLength}\n//                 onKeyDown={handleKeyPresses}\n//                 onChange={handlePreInput}\n//                 className={`py-2 px-2 border-2 w-full outline-none rounded-lg bg-transparent appearance-none peer ${inputStyles}`}\n//                 placeholder=\" \"\n//                 disabled={disabled}\n//                 required\n//             />\n//             {labelWidth && (\n//                 <div\n//                     className='absolute top-0 left-4 peer-focus:opacity-100 peer-placeholder-shown:opacity-0 transition-opacity duration-200'\n//                     style={{\n//                         height: dynamicHeight || 2,\n//                         width: labelWidth * 0.75 + 8,\n//                         backgroundColor: bgColor || 'white'\n//                     }}\n//                 />\n//             )}\n//             <label\n//                 ref={labelRef}\n//                 htmlFor={`floating_input_${name}`}\n//                 className={`\n//                     absolute left-5 duration-300 transform -translate-y-5 scale-75 top-2 origin-left\n//                     peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0\n//                     peer-focus:scale-75 peer-focus:-translate-y-5\n//                     ${(props as FullTemplateProps).sharedStyles?.placeholderStyles || ''} ${placeholderStyles}\n//                     `}\n//             >\n//                 {placeholder}\n//             </label>\n//         </div>\n//     )\n// }\n\n// export default memo(InputTemplate)","import { inputStore } from \"src/store/InputStore\";\n\nexport const handleInitialValue = (path: string, initialValue: string, compName?: string) => {\n    const existingValue = inputStore.getInputNestedValue(path)\n    const value = existingValue || initialValue\n    inputStore.setFieldInitialData(path, value)\n}","// NameScopeContext.ts\r\nimport { createContext, useContext } from \"react\";\r\n\r\nexport const NameScopeContext = createContext<string | null>(null);\r\n\r\nexport const useNameScope = () => useContext(NameScopeContext);\r\n","export const camelCase = (str: string) => {\n    if (str == '_id') return str\n\n    // If it's already camelCase, return it unchanged\n    if (/^[a-z][a-zA-Z0-9]*$/.test(str)) return str;\n    \n    const lowerStr = str.toLowerCase();\n    return lowerStr\n        .replace(/[^a-zA-Z0-9]+(.)/g, (match, chr) => chr.toUpperCase())\n        .replace(/^[A-Z]/, (match) => match.toLowerCase());\n}\n\n\nexport const fromCamelCase = (str : string) => {\n    return str\n    .replace(/([A-Z])/g, ' $1')     // Add space before capital letters\n    .replace(/^./, char => char.toUpperCase()); // Capitalize first letter\n}","import { useNameScope } from \"../context/NameScopeContext\"\r\nimport { camelCase } from \"../functions/camelCase\"\r\n\r\nexport const useFieldName = (placeholder: string, name?: string) => {\r\n  const parent = useNameScope()\r\n  const local = name || camelCase(placeholder)\r\n  return parent ? `${parent}.${local}` : local\r\n}\r\n","import React, { forwardRef, memo, useCallback, useEffect, useRef } from 'react'\nimport type { InputProps, InputRefProps } from \"../typeDeclaration/inputProps\";\nimport { useInputStore } from \"../hooks/useInputStore\";\nimport { useComputedExpression } from \"../hooks/useComputedExpression\";\nimport InputTemplate from \"./InputTemplate\";\nimport { handleInitialValue } from '../Utils/setInitialValue';\nimport { setFieldValue } from '../Utils/SetFieldValue';\nimport { isIndex } from '../Utils/Helper';\nimport { useFieldName } from '../hooks/useFieldName';\nimport { inputStore } from 'src/store/InputStore';\n\ninterface NumInputProps extends InputProps {\n    stringify?: boolean\n}\n\nconst NumInput = forwardRef<InputRefProps, NumInputProps>(({\n    placeholder,\n    onEnterPress,\n    onBlur,\n    containerStyles,\n    stringify = false,\n    autoFocus = false,\n    privacy = false,\n    disabled = false,\n    hideElement = false,\n    onDisableChange,\n    maxLength,\n    inputStyles,\n    placeholderStyles,\n    onChange,\n    initialValue = \"\",\n    name,\n    ...props\n}, ref) => {\n    const modifiedName = useFieldName(placeholder, name)\n\n    useEffect(() => {\n        handleInitialValue(modifiedName, initialValue)\n    }, [])\n\n    const value: string = useInputStore(modifiedName) ?? \"\"\n    const stringValidation = (data: number) => {\n        if (!stringify) {\n            return data\n        }\n        else {\n            return data.toString()\n        }\n    }\n\n    const handleOnDisableChange = useCallback((value: any) => {\n        setFieldValue({ [modifiedName]: value })\n    }, [modifiedName])\n\n    const disabledValue: boolean = useComputedExpression(disabled)\n\n    const hiddenValue: boolean = useComputedExpression(hideElement)\n\n    useEffect(() => {\n        if (onDisableChange) {\n            // const { inputData } = inputStore.getSnapshot()\n            const currentDisabled = inputStore.getInputNestedValue(modifiedName)\n            onDisableChange({\n                state: disabledValue,\n                disabledKey: name,\n                disabledValue: currentDisabled,\n                storeValue: inputStore.getSnapshot().inputData,\n                setValue: handleOnDisableChange\n            })\n        }\n    }, [disabledValue])\n\n    const prevValueRef = useRef(value)\n    useEffect(() => {\n        if (!onChange) return\n        if (value !== prevValueRef.current) {\n            prevValueRef.current = value\n            if (isIndex(value)) {\n                onChange(Number(value))  // Pass null as no event.data\n            }\n        }\n    }, [value])\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const inputVal = e.target.value\n        const newValue = inputVal === \"\" ? \"\" : stringValidation(Number(inputVal))\n        // const nativeEvent = e.nativeEvent as unknown as InputEvent; // Type assertion to InputEvent\n        // onChange(newValue, nativeEvent.data);\n        // fullProps.onInputChange(modifiedName, newValue)\n        inputStore.setValue(modifiedName, newValue)\n    }\n    return (\n        <InputTemplate\n            ref={ref}\n            name={modifiedName}\n            value={value}\n            handleChange={handleChange}\n            autoFocus={autoFocus}\n            maxLength={maxLength}\n            onBlur={onBlur}\n            onEnterPress={onEnterPress}\n            placeholder={placeholder}\n            type={privacy ? 'password' : 'number'}\n            disabled={disabledValue}\n            hideElement={hiddenValue}\n            containerStyles={containerStyles}\n            inputStyles={inputStyles}\n            placeholderStyles={placeholderStyles}\n            {...props}\n        />\n    )\n})\n\n// 1. Export the memoized component\nconst MemoizedNumInput = memo(NumInput)\n\n// 2. Set the displayName on the exported component\nMemoizedNumInput.displayName = 'NumInput';\n\nexport default MemoizedNumInput;\n\n// export default memo(NumInput)\n","import { inputStore } from \"src/store/InputStore\";\r\n\r\nexport interface FieldProps {\r\n    [key: string]: any;\r\n}\r\nexport const setFieldValue = (FieldCredentials: FieldProps) => {\r\n    const keys = Object.keys(FieldCredentials);\r\n    for (const key of keys) {\r\n        inputStore.setValue(key, FieldCredentials[key])\r\n    }\r\n}","export const isIndex = (key: string) => {\r\n  return key !== \"\" && !isNaN(Number(key))\r\n}","import { type FC, memo, ReactNode, useRef, useSyncExternalStore } from \"react\";\r\nimport { NameScopeContext, useNameScope } from \"src/context/NameScopeContext\";\r\nimport { inputStore } from \"src/store/InputStore\";\r\n\r\n\r\ninterface ArrayHelpers {\r\n  add: (item : any) => void\r\n  remove: (index: number) => void\r\n  isLast: (index: number) => boolean\r\n  arrayLength: number\r\n}\r\n\r\ninterface ArrayContainerProps {\r\n    name: string;\r\n    items: any[];\r\n    defaultAddItem?: any\r\n    getKey?: (item: any, index: number) => string;\r\n    children: (item: any, index: number, helpers: ArrayHelpers) => ReactNode\r\n}\r\nconst ArrayContainer: FC<ArrayContainerProps> = ({ name, items, getKey, children, defaultAddItem }) => {\r\n    const initialRender = useRef(true)\r\n    const parent = useNameScope()\r\n    const arrayScope = parent ? `${parent}.${name}` : name\r\n    if (initialRender.current) {\r\n        inputStore.addArrayItem(arrayScope, items)\r\n        initialRender.current = false\r\n    }\r\n    const dynamicItem: any[] = useSyncExternalStore(\r\n        (cb) => inputStore.subscribe(arrayScope, cb),\r\n        () => {\r\n            return inputStore.getArrayItems(arrayScope) ?? items\r\n        }\r\n    )\r\n\r\n    const helpers: ArrayHelpers = {\r\n        add: (addItem) => inputStore.addArrayItem(arrayScope, defaultAddItem || addItem),\r\n        remove: (index) => inputStore.removeArrayItem(arrayScope, index),\r\n        isLast: (index) => index === dynamicItem.length - 1,\r\n        arrayLength: dynamicItem.length\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                dynamicItem.map((item, index) => {\r\n                    const scope = `${arrayScope}.${index}`\r\n                    const modifiedKey = getKey\r\n                        ? getKey(item, index)\r\n                        : scope\r\n                    return (\r\n                        <NameScopeContext.Provider key={modifiedKey || scope} value={scope}>\r\n                            {children(item, index, helpers)}\r\n                        </NameScopeContext.Provider>\r\n                    )\r\n                })\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\n// ArrayContainer.Add = AddInputBox\r\n// ArrayContainer.Remove = RemoveInputBox\r\n\r\nexport default memo(ArrayContainer)\r\n","import { type FC, memo, type ReactNode } from 'react'\nimport { NameScopeContext, useNameScope } from '../context/NameScopeContext';\n\ninterface ObjContainerProps {\n    name: string\n    // inputContainerStyles?: string\n    children: ReactNode\n}\n\n\nconst ObjectContainer: FC<ObjContainerProps> = ({\n    name,\n    // inputContainerStyles = '',\n    children\n}) => {\n    const parent = useNameScope();\n    const scope = parent ? `${parent}.${name}` : name;\n\n    return (\n        <NameScopeContext.Provider value={scope}>\n                {\n                    children\n                }\n        </NameScopeContext.Provider>\n    )\n}\n\n\n// 1. Export the memoized component\nconst MemoizedObjectContainer = memo(ObjectContainer)\n\n// 2. Set the displayName on the exported component\nMemoizedObjectContainer.displayName = 'ObjectContainer';\n\nexport default MemoizedObjectContainer;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// export default memo(ObjectContainer)\n\n{/* <div className={inputContainerStyles ? inputContainerStyles : 'contents'}> */}\n    {/* </div> */}\n// import React, { type FC, memo, type ReactNode, type RefObject, useMemo } from 'react'\n// import { camelCase } from '../functions/camelCase';\n// import { useInputStore } from '../hooks/useInputStore';\n// import { flattenChildren } from '../Utils/flattenChildren';\n// import { handleInitialValue } from '../Utils/setInitialValue';\n\n\n// interface FullProps {\n    //     onInputChange: (name: string, value: any) => void;\n    //     sharedStyles : string\n    //     bgColor : string\n//     modalContainerRef: RefObject<HTMLDivElement>\n// }\n\n// interface ObjContainerProps {\n    //     objName: string\n    //     inputContainerStyles?: string\n    //     children: ReactNode\n// }\n\n// interface InputChildProps {\n    //   onInputChange: (modifiedName: string, value: any) => void;\n//   [key: string]: any; // optional if child has more props\n// }\n\n// const ObjectContainer: FC<ObjContainerProps> = ({\n//     objName,\n//     inputContainerStyles = '',\n//     children,\n//     ...props\n// }) => {\n//     const fullProps = props as FullProps\n//     const setInputValue = useInputStore((state) => state.setInputValue)\n//     const childrenArray = useMemo(() => flattenChildren(children), [children]);\n    \n//     const handleInputChange = (modifiedName : string, value : any) => {\n//         fullProps.onInputChange(modifiedName, value)\n//     }\n\n//     return (\n//         <div className={inputContainerStyles ? inputContainerStyles : 'contents'}>\n//             {\n//                 childrenArray.map((child, index) => {\n//                     if (!React.isValidElement<InputChildProps>(child)) return child;\n//                     const childType = child.type\n//                     const isDOMElement = typeof childType === 'string';\n//                     if (isDOMElement) return child;\n//                     const childProps = child.props\n//                     const modifiedName = (childProps.name || childProps.placeholder) ? childProps.name || camelCase(childProps.placeholder) : undefined\n//                     const changedName = `${objName}.${modifiedName}`\n//                     if (childProps.placeholder) {\n//                         handleInitialValue(changedName, childProps.initialValue,setInputValue, (childType as any).type.name)\n//                     }\n//                     if (React.isValidElement(child)) {\n//                         return React.cloneElement(child, {\n//                             key: child.key ?? index,\n//                             onInputChange: handleInputChange,\n//                             name: changedName,\n//                             sharedStyles : fullProps.sharedStyles,\n//                             bgColor : fullProps.bgColor,\n//                             modalContainerRef: fullProps.modalContainerRef,\n//                             // ...props\n//                             // isArray : isChildArray\n//                         })\n//                     }\n//                     return child\n//                 })\n//             }\n//         </div>\n//     )\n// }\n\n\n// // 1. Export the memoized component\n// const MemoizedObjectContainer = memo(ObjectContainer)\n\n// // 2. Set the displayName on the exported component\n// MemoizedObjectContainer.displayName = 'ObjectContainer';\n\n// export default MemoizedObjectContainer;\n\n\n// // export default memo(ObjectContainer)","import { type FC, memo, useCallback, useEffect } from 'react';\nimport SelectTemplate from './SelectTemplate';\nimport { useComputedExpression } from '../hooks/useComputedExpression';\nimport { type StyleProp } from '../typeDeclaration/stylesProps';\nimport { setFieldValue } from '../Utils/SetFieldValue';\nimport { useFieldName } from '../hooks/useFieldName';\nimport { useSelectOptions, type OptionMap } from '../hooks/useSelectOptions';\nimport { inputStore } from 'src/store/InputStore';\nimport { handleInitialValue } from 'src/Utils/setInitialValue';\n\ninterface SelectOption {\n    label: string;\n    value: string;\n}\n\ninterface FullInputProps {\n    name?: string\n    placeholder: string\n    /** NEW â€” generic dependent dropdown system */\n    dependsOn?: string;\n    optionsMap?: OptionMap;\n    options: SelectOption[] | string[]\n    initialValue?: string;\n    initialLabel?: string\n    disabled?: boolean | string\n    hideElement?: boolean | string\n    styles?: StyleProp\n    searchable?: boolean\n    onDisableChange?: (args: {\n        state: boolean,\n        disabledKey?: string,\n        disabledValue: any,\n        storeValue: Record<string, any> | null,\n        setValue: (value: any) => void\n    }) => void\n    onChange?: (value: string) => void\n    onToggleDropdown?: (isOpen: boolean) => void\n    onInputChange: (name: string, value: string) => void\n    isArrayObject?: boolean\n    arrayData?: {\n        arrayName: string\n        arrayIndex: number\n    }\n    //   sharedStyles?: {\n    //     placeholderStyles?: string;\n    //   };\n    //   bgColor: string;\n}\n\ntype SelectProps = Omit<FullInputProps, \"isArrayObject\" | \"arrayData\" | \"onInputChange\">\n\nconst SelectInput: FC<SelectProps> = ({\n    name,\n    placeholder,\n    options,\n    onChange,\n    dependsOn,\n    onToggleDropdown,\n    optionsMap,\n    initialLabel,\n    disabled = false,\n    hideElement = false,\n    searchable = false,\n    onDisableChange,\n    initialValue = '',\n    styles = {\n        inputStyles: '',\n        placeholderStyles: '',\n        containerStyles: '',\n        modalBoxStyles: '',\n        optionBoxStyles: '',\n        optionStyles: '',\n        dropdownOffset: 5\n    },\n    ...props\n}) => {\n    const modifiedName = useFieldName(placeholder, name)\n\n    const handleOnDisableChange = useCallback((value: any) => {\n        setFieldValue({ [modifiedName]: value })\n    }, [modifiedName])\n\n    useEffect(() => {\n        handleInitialValue(modifiedName, initialValue)\n    }, [])\n\n    const disabledValue: boolean = useComputedExpression(disabled)\n\n    const hiddenValue: boolean = useComputedExpression(hideElement)\n\n    useEffect(() => {\n        if (onDisableChange) {\n            // const { inputData } = inputStore.getSnapshot()\n            const currentDisabled = inputStore.getInputNestedValue(modifiedName)\n            onDisableChange({\n                state: disabledValue,\n                disabledKey: modifiedName,\n                disabledValue: currentDisabled,\n                storeValue: inputStore.getSnapshot().inputData,\n                setValue: handleOnDisableChange\n            })\n        }\n    }, [disabledValue])\n\n    const staticOptions = useSelectOptions({\n        options,\n        dependsOn,\n        optionsMap,\n        initialLabel,\n        initialValue\n    })\n\n    const handleSelect = (selectedValue: string) => {\n        onChange?.(selectedValue);\n        inputStore.setValue(modifiedName, selectedValue);\n    };\n\n    return (\n        <div style={{ display: hiddenValue ? 'none' : 'block' }}>\n            <SelectTemplate\n                name={modifiedName}\n                placeholder={placeholder}\n                onToggleDropdown={onToggleDropdown}\n                options={staticOptions}\n                disabled={disabledValue}\n                hideElement={hiddenValue}\n                seachable={searchable}\n                onSelect={handleSelect}\n                styles={styles}\n                {...props}\n            />\n        </div>\n    );\n};\n\n// export default memo(SelectInput, (prev, next) => prev.name === next.name);\nconst MemoizedSelectInput = memo(SelectInput, (prev, next) => prev.placeholder === next.placeholder)\nMemoizedSelectInput.displayName = 'SelectInput';\nexport default MemoizedSelectInput;\n\n\n\n\n\n\n\n\n\n\n// import React, { FC, memo, useCallback, useEffect, useMemo, useRef } from 'react';\n// import { useInputStore } from 'src/hooks/useInputStore';\n// import { getNestedValue } from 'src/Utils/inputStoreUtils';\n// import SelectTemplate from './SelectTemplate';\n// import { useComputedExpression } from 'src/hooks/useComputedExpression';\n// import { useFormInitials } from 'src/hooks/useFormInitialState';\n\n// interface SelectOption {\n//     label: string;\n//     value: string;\n// }\n\n// interface FullInputProps {\n//     name?: string\n//     placeholder: string\n//     options: SelectOption[] | string[]\n//     initialValue?: string;\n//     initialLabel?: string\n//     disabled?: boolean | string\n//     hideElement?: boolean | string\n//     onDisableChange?: (args: {\n//         state: boolean,\n//         disabledKey?: string,\n//         disabledValue: any,\n//         storeValue: Record<string, any>,\n//         setValue: (value: any) => void\n//     }) => void\n//     onChange?: (value: string) => void\n//     onInputChange: (name: string, value: string) => void\n//     inputStyles?: string\n//     placeholderStyles?: string\n//     containerStyles?: string\n//     isArrayObject?: boolean\n//     arrayData?: {\n//         arrayName: string\n//         arrayIndex: number\n//     }\n//     //   sharedStyles?: {\n//     //     placeholderStyles?: string;\n//     //   };\n//     //   bgColor: string;\n// }\n\n// type SelectProps = Omit<FullInputProps, \"isArrayObject\" | \"arrayData\" | \"onInputChange\">\n\n// const SelectInput: FC<SelectProps> = ({\n//     name,\n//     placeholder,\n//     options,\n//     onChange = () => { },\n//     disabled = false,\n//     hideElement = false,\n//     onDisableChange,\n//     initialLabel,\n//     initialValue = '',\n//     inputStyles = '',\n//     placeholderStyles = '',\n//     containerStyles = '',\n//     //   sharedStyles = {},\n//     //   bgColor = 'white',\n//     ...props\n// }) => {\n//     const fullProps = props as FullInputProps\n//     const value: string = useInputStore((state) => {\n//         if (fullProps.isArrayObject) {\n//             const arr = fullProps.arrayData!;\n//             return state.inputData[arr.arrayName]?.[arr.arrayIndex]?.[name!] ?? '';\n//         }\n//         return getNestedValue(state.inputData, name!) ?? '';\n//     });\n\n//     const handleOnDisableChange = useCallback((value: any) => {\n//         useFormInitials({ [name!]: value })\n//     }, [name])\n\n//     const disabledValue: boolean = useComputedExpression(disabled, name!)\n\n//     const hiddenValue: boolean = useComputedExpression(hideElement, name!)\n\n//     useEffect(() => {\n//         if (onDisableChange) {\n//             const { inputData } = useInputStore.getState()\n//             const currentDisabled = getNestedValue(inputData, name)\n//             onDisableChange({\n//                 state: disabledValue,\n//                 disabledKey: name,\n//                 disabledValue: currentDisabled,\n//                 storeValue: inputData,\n//                 setValue: handleOnDisableChange\n//             })\n//         }\n//     }, [disabledValue])\n\n//     const prevValueRef = useRef(value);\n\n//     useEffect(() => {\n//         if (value !== prevValueRef.current) {\n//             prevValueRef.current = value;\n//             if (value !== '') onChange(value);\n//         }\n//     }, [value]);\n\n//     const refinedOption: SelectOption[] = useMemo(() => {\n//         if (options.length > 0 && typeof options[0] !== 'string') {\n//             return options as SelectOption[]\n//         }\n//         const initialItem = initialLabel ? [{ label: initialLabel, value: initialValue }] : []\n//         const newOption = (options as string[]).map((item) => ({ label: item, value: item }))\n//         return [...initialItem, ...newOption]\n//     }, [options])\n\n//     const handleSelect = (selectedValue: string) => {\n//         onChange(selectedValue);\n//         if (fullProps.onInputChange) {\n//             fullProps.onInputChange(name!, selectedValue);\n//         }\n//         // useInputStore.getState().setInputValue(name, selectedValue);\n//     };\n\n//     return (\n//         <div style={{ display: hiddenValue ? 'none' : 'block' }}>\n//             <SelectTemplate\n//                 name={name!}\n//                 value={value}\n//                 placeholder={placeholder}\n//                 options={refinedOption}\n//                 disabled={disabledValue}\n//                 hideElement={hiddenValue}\n//                 onSelect={handleSelect}\n//                 inputStyles={inputStyles}\n//                 placeholderStyles={placeholderStyles}\n//                 containerStyles={containerStyles}\n//                 {...props}\n//             />\n//         </div>\n//     );\n// };\n\n// const MemoizedSelectInput = memo(SelectInput)\n// MemoizedSelectInput.displayName = 'SelectInput';\n// export default MemoizedSelectInput;\n","import React, { useRef, useState, useLayoutEffect, memo, useCallback, type RefObject } from 'react';\nimport { type StyleProp } from '../typeDeclaration/stylesProps';\nimport DropdownModal from './DropdownModal';\n// import { useInputStore } from 'src/hooks/useInputStore';\n\ninterface SelectOption {\n    label: string;\n    value: string;\n}\n\ninterface FullTemplateProps {\n    name: string;\n    placeholder: string;\n    options: SelectOption[];\n    onSelect: (value: string) => void;\n    onToggleDropdown?: (isOpen: boolean) => void;\n    disabled: boolean;\n    hideElement?: boolean;\n    seachable: boolean;\n    styles: StyleProp\n    bgColor: string;\n    modalContainerRef : RefObject<HTMLDivElement>\n    sharedStyles?: {\n        placeholderStyles?: string;\n        [key: string]: any;\n    };\n}\n\ninterface TemplateProps extends Omit<FullTemplateProps, 'sharedStyles' | 'bgColor' | 'modalContainerRef'> {\n    makeEmptyDisabled?: boolean\n}\n\n// type TemplateProps = Omit<FullTemplateProps, 'sharedStyles' | 'bgColor'>;\n\nconst SelectTemplate: React.FC<TemplateProps> = ({\n    name,\n    placeholder,\n    options,\n    onSelect,\n    onToggleDropdown,\n    disabled,\n    hideElement,\n    seachable,\n    styles,\n    makeEmptyDisabled = false,\n    ...props\n}) => {\n    const fullProps = props as FullTemplateProps\n    // const setFocusInputKey = useInputStore((state) => state.setCurrentInputKey);\n    // const containerRef = useRef<HTMLDivElement>(null)\n    const labelRef = useRef<any>(null);\n    const [labelWidth, setLabelWidth] = useState<number | null>(null);\n\n\n    useLayoutEffect(() => {\n        if (labelRef.current) {\n            setLabelWidth(labelRef.current.offsetWidth);\n        }\n    }, [hideElement]);\n\n    const handleSelect = useCallback((selectedValue: string) => {\n        onSelect(selectedValue);\n    }, []);\n\n\n    // if (!labelWidth) return null\n\n    return (\n        <div className={`relative w-full group ${styles.containerStyles}`}>\n            <DropdownModal onSelect={handleSelect} options={options} name={name} styles={styles} onToggleDropdown={onToggleDropdown} seachable={seachable} disabled={disabled} modalContainerRef={fullProps.modalContainerRef} />\n            {labelWidth && (\n                <div\n                    className=\"absolute top-0 left-4 peer-focus:opacity-100 transition-opacity duration-200\"\n                    style={{\n                        height: 2,\n                        width: labelWidth * 0.75 + 8,\n                        backgroundColor: fullProps.bgColor || 'white',\n                    }}\n                />\n            )}\n            <label\n                ref={labelRef}\n                htmlFor={`floating_select_${name}`}\n                className={`\n                    absolute left-5 duration-300 transform -translate-y-5 scale-75 top-2 origin-left\n                    peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0\n                    peer-focus:scale-75 peer-focus:-translate-y-5\n                    ${styles.placeholderStyles} ${fullProps.sharedStyles?.placeholderStyles || ''}\n                `}\n            >\n                {placeholder}\n            </label>\n        </div>\n    );\n};\n\nexport default memo(SelectTemplate);\n\n\n\n\n\n\n\n// import React, { useRef, useState, useLayoutEffect, useEffect } from 'react';\n// import { useInputStore } from 'src/hooks/useInputStore';\n// // import { useInputStore } from 'src/hooks/useInputStore';\n\n// interface SelectOption {\n//     label: string;\n//     value: string;\n// }\n\n// interface FullTemplateProps {\n//     name: string;\n//     placeholder: string;\n//     options: SelectOption[];\n//     value: string;\n//     onSelect: (value: string) => void;\n//     disabled?: boolean;\n//     hideElement?: boolean;\n//     containerStyles?: string;\n//     inputStyles?: string;\n//     placeholderStyles?: string;\n//     bgColor: string;\n//     sharedStyles?: {\n//         placeholderStyles?: string;\n//         [key: string]: any;\n//     };\n// }\n\n// interface TemplateProps extends Omit<FullTemplateProps, 'sharedStyles' | 'bgColor'> {\n//     makeEmptyDisabled?: boolean\n// }\n\n// // type TemplateProps = Omit<FullTemplateProps, 'sharedStyles' | 'bgColor'>;\n\n// const SelectTemplate: React.FC<TemplateProps> = ({\n//     name,\n//     placeholder,\n//     options,\n//     value,\n//     onSelect,\n//     disabled = false,\n//     hideElement = false,\n//     containerStyles = '',\n//     inputStyles = '',\n//     placeholderStyles = '',\n//     makeEmptyDisabled = false,\n//     ...props\n// }) => {\n//     const setFocusInputKey = useInputStore((state) => state.setCurrentInputKey);\n//     const containerRef = useRef<HTMLDivElement>(null)\n//     const labelRef = useRef<any>(null);\n//     const [labelWidth, setLabelWidth] = useState<number | null>(null);\n//     const [isOpen, setIsOpen] = useState(false);\n\n//     const toggleDropdown = () => {\n//         if (!disabled) {\n//             setFocusInputKey(name);\n//             setIsOpen((prev) => !prev);\n//         }\n//     };\n\n//     // Close dropdown when clicking outside\n//     useEffect(() => {\n//         const handleClickOutside = (event: MouseEvent) => {\n//             if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n//                 setIsOpen(false);\n//             }\n//         };\n//         document.addEventListener('mousedown', handleClickOutside);\n//         return () => {\n//             document.removeEventListener('mousedown', handleClickOutside);\n//         };\n//     }, []);\n\n//     useLayoutEffect(() => {\n//         if (labelRef.current) {\n//             setLabelWidth(labelRef.current.offsetWidth);\n//         }\n//     }, [hideElement]);\n//     // }, [value, placeholder]);\n\n//     return (\n//         <div ref={containerRef} className={`relative w-full group ${containerStyles}`}>\n//             <div\n//                 onClick={toggleDropdown}\n//                 className={`py-2 px-2 border-2 w-full h-12 flex justify-between items-center rounded-lg outline-none bg-transparent cursor-pointer ${inputStyles}`}\n//             >\n//                 <span>{options.find((opt) => opt.value === value)?.label || ''}</span>\n//                 <svg\n//                     className={`w-4 h-4 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n//                     fill=\"none\"\n//                     stroke=\"currentColor\"\n//                     viewBox=\"0 0 24 24\"\n//                     xmlns=\"http://www.w3.org/2000/svg\"\n//                 >\n//                     <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path>\n//                 </svg>\n//             </div>\n\n//             {labelWidth && (\n//                 <div\n//                     className=\"absolute top-0 left-4 peer-focus:opacity-100 transition-opacity duration-200\"\n//                     style={{\n//                         height: 2,\n//                         width: labelWidth * 0.75 + 8,\n//                         backgroundColor: (props as FullTemplateProps).bgColor || 'white',\n//                     }}\n//                 />\n//             )}\n//             <label\n//                 ref={labelRef}\n//                 htmlFor={`floating_select_${name}`}\n//                 className={`\n//                     absolute left-5 duration-300 transform -translate-y-[20px] scale-75 top-2 origin-[0]\n//                     peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0\n//                     peer-focus:scale-75 peer-focus:-translate-y-[20px]\n//                     ${placeholderStyles} ${(props as FullTemplateProps).sharedStyles?.placeholderStyles || ''}\n//                 `}\n//             >\n//                 {placeholder}\n//             </label>\n\n//             {isOpen && (\n//                 <div className=\"absolute z-10 mt-1 w-full bg-white border-gray-300 border rounded-lg shadow-lg max-h-48 overflow-y-auto\">\n//                     {options.map((option) => (\n//                         <div\n//                             key={option.value}\n//                             onClick={() => {\n//                                 onSelect(option.value);\n//                                 setIsOpen(false);\n//                             }}\n//                             // className=\"px-4 py-2 hover:bg-gray-100 cursor-pointer\"\n//                             className={`\n//                                 ${(option.value == \"\" && makeEmptyDisabled) ? '' : 'cursor-pointer hover:bg-gray-200'} py-2 px-4\n//                                 ${value === option.value ? 'bg-blue-100 text-blue-700 font-medium' : ''}\n//                             `}\n//                         >\n//                             {option.label}\n//                         </div>\n//                     ))}\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default React.memo(SelectTemplate);","import { type FC, memo, useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { isEmptyArray } from \"../functions/dataTypesValidation\";\nimport { useInputStore } from \"../hooks/useInputStore\";\nimport { type StyleProp } from \"../typeDeclaration/stylesProps\";\n// import { createPortal } from 'react-dom'\nimport { shallowOrDeepEqual } from \"../functions/shallowOrDeepEqual\";\nimport OptionItem from \"./OptionItem\";\n\n\ninterface DropdownOption {\n    label: string;\n    value: string;\n}\ninterface DropdownModalProps {\n    options: DropdownOption[];\n    onSelect: (value: string) => void;\n    disabled: boolean;\n    seachable: boolean;\n    styles: StyleProp\n    name: string;\n    onToggleDropdown?: (isOpen: boolean) => void;\n    modalContainerRef?: React.RefObject<HTMLDivElement>;\n    // You should typically pass the current value in as a prop for a controlled component\n    initialValue?: string;\n}\n\nconst DropdownModal: FC<DropdownModalProps> = ({\n    options,\n    onSelect,\n    onToggleDropdown,\n    disabled,\n    seachable,\n    name,\n    styles,\n    modalContainerRef,\n}) => {\n    const [isOpen, setIsOpen] = useState(false);\n    // Use the initialValue prop for the controlled state\n    // const [value, setValue] = useState<string>(initialValue);\n    const value: string = useInputStore(name)\n    const [search, setSearch] = useState<string>('');\n    const highlightIndexRef = useRef<number>(0);\n    const optionRefs = useRef<HTMLDivElement[]>([]);\n    const [position, setPosition] = useState<{\n        top: number;\n        left: number;\n        width: number;\n        direction: \"up\" | \"down\";\n    } | null>(null);\n    const inputRef = useRef<HTMLDivElement>(null);\n    const modalRef = useRef<HTMLDivElement>(null)\n    const searchRef = useRef<HTMLInputElement>(null);\n\n    // Sync external value changes if needed (useful if initialValue can change)\n    // useEffect(() => {\n    //     setValue(initialValue);\n    // }, [initialValue]);\n\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (inputRef.current && !inputRef.current.contains(event.target as Node)) {\n                // setIsOpen(false);\n                closeDropdown();\n            }\n        };\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => {\n            document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, []);\n\n    const handleOptionClick = (selectedValue: string) => {\n        // setValue(selectedValue);\n        onSelect(selectedValue);\n        setIsOpen(false);\n    }\n\n    // 2. Stable click handler function for options\n    const handleOptionSelect = (option: DropdownOption) => {\n        handleOptionClick(option.value);\n    }\n\n    const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setSearch(e.target.value)\n        updateHighlight(0)\n    }\n    \n    const filteredOptions = useMemo(() => {\n        if (!search) return options;\n        const lowered = search.toLowerCase();\n\n        return options.filter((opt) => {\n            const label = opt.label.toLowerCase();\n            return label.indexOf(lowered) !== -1;\n        });\n        /////// ChatGPT says indexOf() is 30â€“40% faster than includes() and does not allocate regex objects.\n        // return options.filter(option =>\n        //     option.label.toLowerCase().includes(search.toLowerCase())\n        // );\n    }, [search, options]);\n\n    const optionRefsCallback = useCallback((el: HTMLDivElement | null) => {\n        if (!el) return;\n\n        // Get index from dataset\n        const label = el.dataset.label;\n        if (!label) return;\n\n        // Find index ONCE\n        const idx = filteredOptions.findIndex(o => o.label === label);\n        if (idx !== -1) {\n            optionRefs.current[idx] = el;\n        }\n    }, [filteredOptions]);\n    \n    useLayoutEffect(() => {\n        if (isOpen && modalRef.current) {\n            calculatePosition();\n            updateHighlight(0);\n        }\n    }, [filteredOptions.length, isOpen]);\n\n\n\n    const calculatePosition = () => {\n        const inputRect = inputRef.current?.getBoundingClientRect();\n        // Use document.documentElement.clientHeight for viewport height fallback\n        const modalContainer = modalContainerRef?.current || document.documentElement;\n        const modalRect = modalContainer.getBoundingClientRect();\n        const dropdownRect = modalRef.current?.getBoundingClientRect()\n\n        if (!inputRect || !dropdownRect) return;\n\n        \n        const spaceBelow = modalRect.bottom - inputRect.bottom;\n        const spaceAbove = inputRect.top - modalRect.top;\n        \n        const direction =\n        spaceBelow < spaceAbove\n        ? \"up\"\n        : \"down\";\n        \n        \n        const scrollOffset = modalContainer === document.documentElement ? window.scrollY : 0;\n        const top = direction === \"down\"\n            ? inputRect.bottom + scrollOffset + styles.dropdownOffset!\n            : inputRect.top - dropdownRect.height + scrollOffset - styles.dropdownOffset!\n\n        setPosition({\n            left: inputRect.left,\n            width: inputRect.width,\n            top,\n            direction,\n        });\n    };\n\n    const openDropdown = () => {\n      if (disabled) return\n      setIsOpen(true)\n      highlightIndexRef.current = 0;\n      setSearch('');\n      setTimeout(() => {\n          searchRef.current?.focus()\n          updateHighlight(0);\n      }, 10);\n    }\n    \n    const closeDropdown = () => {\n      setIsOpen(false)\n    }\n\n    useEffect(() => {\n        onToggleDropdown?.(isOpen);\n    }, [isOpen])\n\n    /** update highlight without rerender */\n    const updateHighlight = (newIndex: number) => {\n        if (filteredOptions.length === 0) return; // <-- FIX\n        const oldIndex = highlightIndexRef.current;\n        if (oldIndex == newIndex) return\n        \n        // Remove highlight from old element\n        optionRefs.current[oldIndex]?.classList.remove(\"bg-blue-100\");\n        // Add highlight to new element\n        optionRefs.current[newIndex]?.classList.add(\"bg-blue-100\");\n        // Scroll the element into view\n        optionRefs.current[newIndex]?.scrollIntoView({ block: \"nearest\" });\n        \n        highlightIndexRef.current = newIndex;\n    };\n\n    // keyboard navigation\n    const handleKeyDown = (e: React.KeyboardEvent) => {\n        if (!isOpen) return;\n\n        \n        if (e.key === \"ArrowDown\") {\n            e.preventDefault();\n            const next = Math.min(\n                highlightIndexRef.current + 1,\n                filteredOptions.length - 1\n            );\n            updateHighlight(next);\n        }\n\n        if (e.key === \"ArrowUp\") {\n            e.preventDefault();\n            const prev = Math.max(highlightIndexRef.current - 1, 0);\n            updateHighlight(prev);\n        }\n\n        if (e.key === \"Enter\") {\n            e.preventDefault();\n            const chosen = filteredOptions[highlightIndexRef.current];\n            if (chosen) {\n                handleOptionClick(chosen.value);\n            }\n        }\n\n        if (e.key === \"Escape\") {\n            // setIsOpen(false);\n            closeDropdown();\n            // inputRef.current?.focus(); // Return focus to the main input\n        }\n    };\n\n    // const handleSelectOption = useCallback((opt : string) => {\n    //     onSelect(opt);\n    // }, [onSelect]);\n\n\n    // JSX for the dropdown panel, placed in a separate variable for portal usage\n    const dropdownPanel = isOpen ? (\n        <div\n            className={`fixed z-10 bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-hidden ${styles.modalBoxStyles}`}\n            style={{\n                top: position?.top,\n                left: position?.left,\n                width: position?.width,\n            }}\n            ref={modalRef}\n            // Prevent outside click handler from firing when clicking the panel itself\n            // onClick={(e) => e.stopPropagation()}\n            onMouseDown={(e) => e.stopPropagation()}\n        >\n            {/* ðŸ” Search box */}\n            {\n                seachable && (\n                    <div className=\"p-2 border-b border-gray-200\">\n                        <input\n                            ref={searchRef}\n                            type=\"text\"\n                            placeholder=\"Search...\"\n                            className=\"w-full px-3 py-1 border rounded-lg bg-gray-50 outline-none\"\n                            value={search}\n                            onChange={handleSearchChange}\n                            // Keep search input focused for typing\n                            onClick={(e) => e.stopPropagation()}\n                            onMouseDown={(e) => e.stopPropagation()}\n                            onKeyDown={(e) => {\n                                e.stopPropagation();\n                                handleKeyDown(e);\n                            }} // Listen for keyboard navigation here too\n                        />\n                    </div>\n                )\n            }\n            <div className=\"max-h-48 overflow-y-auto\" onClick={(e) => e.stopPropagation()}>\n                {/* No Options Found */}\n                {\n                    isEmptyArray(filteredOptions) ? (\n                        <div className={`py-2 px-4 text-gray-500 ${styles.optionStyles}`}>\n                            No options found.\n                        </div>\n                    ) : (\n                        filteredOptions.map((option, index) => (\n                            <OptionItem\n                            key={option.value}\n                            label={option.label}\n                            isSelected={value === option.value}\n                            isHighlighted = {highlightIndexRef.current === index}\n                            name={name!}\n                            optionClass={styles.optionStyles!}\n                            onSelect={() => handleOptionSelect(option)}\n                            ref={optionRefsCallback}\n                            // ref={(el) => {\n                            //     if (el) optionRefs.current[index] = el;\n                            // }}\n                        />\n                        ))\n                    )\n                }\n            </div>\n        </div>\n    ) : null;\n\n    // Determine the portal target (document.body is the safest default)\n    const portalTarget = document.body;\n\n    return (\n        <div\n            ref={inputRef}\n            onClick={openDropdown}\n            onKeyDown={handleKeyDown}\n            onFocus={openDropdown}\n            tabIndex={0} // Makes the div focusable for keyboard navigation\n            className={`py-2 px-2 relative border-2 w-full h-12 flex justify-between items-center rounded-lg outline-none bg-transparent cursor-pointer ${styles.inputStyles}`}\n        >\n            <span>{options.find((opt) => opt.value === value)?.label || 'Select an Option'}</span>\n            <svg\n                className={`w-4 h-4 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n            >\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path>\n            </svg>\n\n            {/* 1. Use createPortal to render the dropdown outside the component's DOM */}\n            {isOpen && portalTarget && dropdownPanel}\n            {/* {isOpen && portalTarget && createPortal(dropdownPanel, portalTarget)} */}\n        </div>\n    )\n}\n\nexport default memo(DropdownModal, (prev, next) => shallowOrDeepEqual(prev.options, next.options))\n// export default memo(DropdownModal)\n// export default memo(DropdownModal, (prev, next) => isEqual(prev.options, next.options))\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import React, { FC, memo, RefObject, useEffect, useMemo, useRef, useState } from 'react'\n// import { isEmptyArray } from '../../../Functions/dataTypesValidation';\n// import { createPortal } from 'react-dom'; // 1. Imported createPortal\n\n// interface DropdownOption {\n//     label: string;\n//     value: string;\n// }\n// interface DropdownStyles {\n//     modalBoxStyles?: string\n//     optionBoxStyles?: string\n//     optionStyles?: string\n// }\n// interface DropdownModalProps {\n//     options: DropdownOption[];\n//     onSelect: (value: string) => void;\n//     disabled: boolean;\n//     seachable: boolean;\n//     inputStyles?: string;\n//     dropdownStyles?: DropdownStyles\n//     name?: string;\n//     onToggleDropdown?: (isOpen: boolean) => void;\n//     modalContainerRef?: React.RefObject<HTMLDivElement>;\n//     // You should typically pass the current value in as a prop for a controlled component\n//     initialValue?: string;\n// }\n\n// const DropdownModal: FC<DropdownModalProps> = ({\n//     options,\n//     onSelect,\n//     disabled,\n//     seachable,\n//     name,\n//     inputStyles = '',\n//     dropdownStyles,\n//     onToggleDropdown,\n//     modalContainerRef,\n//     initialValue = ''\n// }) => {\n//     const [isOpen, setIsOpen] = useState(false);\n//     // Use the initialValue prop for the controlled state\n//     const [value, setValue] = useState<string>(initialValue);\n//     const [search, setSearch] = useState<string>('');\n//     const highlightIndexRef = useRef<number>(0);\n//     const optionRefs = useRef<HTMLDivElement[]>([]);\n//     const [position, setPosition] = useState<{\n//         top: number;\n//         left: number;\n//         width: number;\n//         direction: \"up\" | \"down\";\n//     } | null>(null);\n//     const containerRef = useRef<HTMLDivElement>(null);\n//     const searchRef = useRef<HTMLInputElement>(null);\n\n//     // Sync external value changes if needed (useful if initialValue can change)\n//     useEffect(() => {\n//         setValue(initialValue);\n//     }, [initialValue]);\n\n//     useEffect(() => {\n//         const handleClickOutside = (event: MouseEvent) => {\n//             if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n//                 setIsOpen(false);\n//             }\n//         };\n//         document.addEventListener('mousedown', handleClickOutside);\n//         return () => {\n//             document.removeEventListener('mousedown', handleClickOutside);\n//         };\n//     }, []);\n\n//     const handleOptionClick = (selectedValue: string) => {\n//         setValue(selectedValue);\n//         onSelect(selectedValue);\n//         setIsOpen(false);\n//     }\n\n//     // 2. Stable click handler function for options\n//     const handleOptionSelect = (option: DropdownOption) => {\n//         handleOptionClick(option.value);\n//     }\n\n//     const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n//         setSearch(e.target.value)\n//         highlightIndexRef.current = 0;\n//     }\n\n//     const filteredOptions = useMemo(() => {\n//         if (!search) return options;\n//         return options.filter(option =>\n//             option.label.toLowerCase().includes(search.toLowerCase())\n//         );\n//     }, [search, options]);\n\n//     // Recalculate position on filter change if dropdown is open\n//     useEffect(() => {\n//         if (isOpen) {\n//             calculatePosition();\n//             // Reset highlight index on filtering\n//             updateHighlight(0);\n//         }\n//     }, [filteredOptions.length, isOpen])\n\n\n//     const calculatePosition = () => {\n//         const inputRect = containerRef.current?.getBoundingClientRect();\n//         // Use document.documentElement.clientHeight for viewport height fallback\n//         const modalContainer = modalContainerRef?.current || document.documentElement;\n//         const modalRect = modalContainer.getBoundingClientRect();\n\n//         if (!inputRect) return;\n\n//         // Max height of the dropdown list container\n//         const dropdownMaxHeight = 250;\n//         // Height of all rendered options (40px per option + padding/border estimate)\n//         // A better calculation might be to render the options off-screen first to measure\n//         const optionsListHeight = !isEmptyArray(filteredOptions) ? filteredOptions.length * 40 : 40\n//         const dropdownHeight = Math.min(dropdownMaxHeight, optionsListHeight + (seachable ? 40 : 0)); // +40 for search bar height\n\n\n//         const spaceBelow = modalContainer.clientHeight - inputRect.bottom;\n//         const spaceAbove = inputRect.top - modalRect.top;\n\n//         const direction =\n//             spaceBelow < dropdownHeight && spaceAbove > dropdownHeight\n//                 ? \"up\"\n//                 : \"down\";\n        \n//         const multiFactor = direction === \"down\" ? 1 : -1;\n\n//         const scrollOffset = modalContainer === document.documentElement ? window.scrollY : 0;\n\n//         const topRaw = direction === \"down\"\n//             ? inputRect.bottom + scrollOffset + 4\n//             : inputRect.top + scrollOffset - dropdownHeight - 4;\n\n//         setPosition({\n//             left: inputRect.left,\n//             width: inputRect.width,\n//             top: seachable ? topRaw + (12*multiFactor) : topRaw, // Adjust for search bar height\n//             direction,\n//         });\n//     };\n\n//     const toggleDropdown = () => {\n//         if (disabled || isEmptyArray(options)) return\n//         onToggleDropdown && onToggleDropdown(isOpen);\n//         const newState = !isOpen;\n\n//         if (newState) {\n//             calculatePosition();\n//             highlightIndexRef.current = 0;\n//             // Reset search when opening\n//             setSearch('');\n//         }\n\n//         setIsOpen(newState);\n\n//         if (newState) {\n//             // Focus search input after state transition\n//             setTimeout(() => {\n//                 searchRef.current?.focus()\n//                 updateHighlight(0);\n//             }, 10);\n//         }\n//     };\n\n//     /** update highlight without rerender */\n//     const updateHighlight = (newIndex: number) => {\n//         if (filteredOptions.length === 0) return; // <-- FIX\n//         const oldIndex = highlightIndexRef.current;\n\n//         // Remove highlight from old element\n//         optionRefs.current[oldIndex]?.classList.remove(\"bg-blue-100\");\n//         // Add highlight to new element\n//         optionRefs.current[newIndex]?.classList.add(\"bg-blue-100\");\n//         // Scroll the element into view\n//         optionRefs.current[newIndex]?.scrollIntoView({ block: \"nearest\" });\n\n//         highlightIndexRef.current = newIndex;\n//     };\n\n//     // keyboard navigation\n//     const handleKeyDown = (e: React.KeyboardEvent) => {\n//         if (!isOpen) return;\n\n//         if (e.key === \"ArrowDown\") {\n//             e.preventDefault();\n//             const next = Math.min(\n//                 highlightIndexRef.current + 1,\n//                 filteredOptions.length - 1\n//             );\n//             updateHighlight(next);\n//         }\n\n//         if (e.key === \"ArrowUp\") {\n//             e.preventDefault();\n//             const prev = Math.max(highlightIndexRef.current - 1, 0);\n//             updateHighlight(prev);\n//         }\n\n//         if (e.key === \"Enter\") {\n//             e.preventDefault();\n//             const chosen = filteredOptions[highlightIndexRef.current];\n//             if (chosen) {\n//                 handleOptionClick(chosen.value);\n//             }\n//         }\n\n//         if (e.key === \"Escape\") {\n//             setIsOpen(false);\n//             containerRef.current?.focus(); // Return focus to the main input\n//         }\n//     };\n\n//     // JSX for the dropdown panel, placed in a separate variable for portal usage\n//     const dropdownPanel = isOpen && position ? (\n//         <div\n//             className={`fixed z-10 bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-hidden ${dropdownStyles?.modalBoxStyles || \"\"}`}\n//             style={{\n//                 top: position.top,\n//                 left: position.left,\n//                 width: position.width,\n//                 // Adjust margin based on direction\n//                 // marginTop: position.direction === \"up\" ? -4 : 4,\n//             }}\n//             // Prevent outside click handler from firing when clicking the panel itself\n//             // onClick={(e) => e.stopPropagation()}\n//             onMouseDown={(e) => e.stopPropagation()}\n//         >\n//             {/* ðŸ” Search box */}\n//             {\n//                 seachable && (\n//                     <div className=\"p-2 border-b border-gray-200\">\n//                         <input\n//                             ref={searchRef}\n//                             type=\"text\"\n//                             placeholder=\"Search...\"\n//                             className=\"w-full px-3 py-1 border rounded-lg bg-gray-50 outline-none\"\n//                             value={search}\n//                             onChange={handleSearchChange}\n//                             // Keep search input focused for typing\n//                             onClick={(e) => e.stopPropagation()}\n//                             onKeyDown={handleKeyDown} // Listen for keyboard navigation here too\n//                         />\n//                     </div>\n//                 )\n//             }\n//             <div className=\"max-h-48 overflow-y-auto\" onClick={(e) => e.stopPropagation()}>\n//                 {/* No Options Found */}\n//                 {\n//                     isEmptyArray(filteredOptions) ? (\n//                         <div className=\"py-2 px-4 text-gray-500\">\n//                             No options found.\n//                         </div>\n//                     ) : (\n//                         filteredOptions.map((option, index) => (\n//                             <div\n//                                 key={option.value}\n//                                 onClick={() => handleOptionSelect(option)} // 2. Stable click handler\n//                                 ref={(el) => {\n//                                     if (el) optionRefs.current[index] = el;\n//                                 }}\n//                                 className={`\n//                                     py-2 px-4 cursor-pointer hover:bg-blue-200\n//                                     ${value === option.value ? 'text-blue-700 font-medium' : ''}\n//                                     ${highlightIndexRef.current === index ? 'bg-blue-100' : ''} \n//                                 `}\n//                             >\n//                                 {option.label}\n//                             </div>\n//                         ))\n//                     )\n//                 }\n//             </div>\n//         </div>\n//     ) : null;\n\n//     // Determine the portal target (document.body is the safest default)\n//     const portalTarget = document.body;\n\n//     return (\n//         <div\n//             ref={containerRef}\n//             onClick={toggleDropdown}\n//             onKeyDown={handleKeyDown}\n//             tabIndex={0} // Makes the div focusable for keyboard navigation\n//             className={`py-2 px-2 relative border-2 w-full h-12 flex justify-between items-center rounded-lg outline-none bg-transparent cursor-pointer ${inputStyles}`}\n//         >\n//             <span>{options.find((opt) => opt.value === value)?.label || 'Select an Option'}</span>\n//             <svg\n//                 className={`w-4 h-4 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n//                 fill=\"none\"\n//                 stroke=\"currentColor\"\n//                 viewBox=\"0 0 24 24\"\n//                 xmlns=\"http://www.w3.org/2000/svg\"\n//             >\n//                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path>\n//             </svg>\n\n//             {/* 1. Use createPortal to render the dropdown outside the component's DOM */}\n//             {isOpen && portalTarget && createPortal(dropdownPanel, portalTarget)}\n//         </div>\n//     )\n// }\n\n// export default memo(DropdownModal)\n\n\n\n\n\n\n\n// import React, { FC, memo, RefObject, useEffect, useMemo, useRef, useState } from 'react'\n// import { useInputStore } from '../../../Hooks/useInputStore';\n// import { isEmptyArray } from '../../../Functions/dataTypesValidation';\n// import { createPortal } from 'react-dom';\n// import Options from './Options';\n\n// interface DropdownOption {\n//     label: string;\n//     value: string;\n// }\n// interface DropdownModalProps {\n//     options: DropdownOption[];\n//     // containerRef: RefObject<HTMLDivElement>;\n//     onSelect: (value: string) => void;\n//     disabled: boolean;\n//     seachable: boolean;\n//     inputStyles?: string;\n//     name?: string;\n//     onToggleDropdown?: (isOpen: boolean) => void;\n//     modalContainerRef?: React.RefObject<HTMLDivElement>;\n// }\n\n// const DropdownModal: FC<DropdownModalProps> = ({\n//     options,\n//     // containerRef,\n//     onSelect,\n//     disabled,\n//     seachable,\n//     name,\n//     inputStyles = '',\n//     onToggleDropdown,\n//     modalContainerRef\n// }) => {\n//     const [isOpen, setIsOpen] = useState(false);\n//     const [value, setValue] = useState<string>('')\n//     const [search, setSearch] = useState<string>('')\n//     // const [highlightIndex, setHighlightIndex] = useState<number>(0);\n//     const highlightIndexRef = useRef<number>(0);\n//     /** DOM refs for each option */\n//     const optionRefs = useRef<HTMLDivElement[]>([]);\n//     const [position, setPosition] = useState<{\n//         top: number;\n//         left: number;\n//         width: number;\n//         direction: \"up\" | \"down\";\n//     } | null>(null);\n//     const containerRef = useRef<HTMLDivElement>(null);\n//     const searchRef = useRef<HTMLInputElement>(null);\n//     useEffect(() => {\n//         const handleClickOutside = (event: MouseEvent) => {\n//             if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n//                 setIsOpen(false);\n//             }\n//         };\n//         document.addEventListener('mousedown', handleClickOutside);\n//         return () => {\n//             document.removeEventListener('mousedown', handleClickOutside);\n//         };\n//     }, []);\n//     const handleOptionClick = (selectedValue: string) => {\n//         setValue(selectedValue);\n//         onSelect(selectedValue);\n//         setIsOpen(false);\n//     }\n\n//     const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n//         setSearch(e.target.value)\n//         highlightIndexRef.current = 0;\n//         // setHighlightIndex(0);\n//         // const searchValue = e.target.value\n//     }\n\n//     const filteredOptions = useMemo(() => {\n//         if (!search) return options;\n//         return options.filter(option =>\n//             option.label.toLowerCase().includes(search.toLowerCase())\n//         );\n//     }, [search, options]);\n//     const toggleDropdown = () => {\n//         if (disabled || isEmptyArray(options)) return\n//         onToggleDropdown && onToggleDropdown(isOpen);\n//         const newState = !isOpen;\n//         if (newState) {\n//             calculatePosition();\n//         }\n//         setIsOpen(newState);\n//         if (newState) {\n//             // focus search input after opening\n//             setTimeout(() => {\n//                 highlightIndexRef.current = 0;\n//                 updateHighlight(0);\n//                 // setHighlightIndex(0)\n//                 searchRef.current?.focus()\n//             }, 10);\n//         }\n//     };\n\n//     /** update highlight without rerender */\n//     const updateHighlight = (newIndex: number) => {\n//         const oldIndex = highlightIndexRef.current;\n\n//         optionRefs.current[oldIndex]?.classList.remove(\"bg-blue-100\");\n//         optionRefs.current[newIndex]?.classList.add(\"bg-blue-100\");\n//         optionRefs.current[newIndex]?.scrollIntoView({ block: \"nearest\" });\n\n//         highlightIndexRef.current = newIndex;\n//     };\n\n//     const calculatePosition = () => {\n//         const inputRect = containerRef.current?.getBoundingClientRect();\n//         const modalRect = modalContainerRef?.current?.getBoundingClientRect();\n\n//         if (!inputRect || !modalRect) return;\n\n//         const dropdownHeight = Math.min(250, filteredOptions.length * 45);\n\n//         const spaceBelow = modalRect.bottom - inputRect.bottom;\n//         const spaceAbove = inputRect.top - modalRect.top;\n\n//         const direction =\n//             spaceBelow < dropdownHeight && spaceAbove > dropdownHeight\n//                 ? \"up\"\n//                 : \"down\";\n\n//         setPosition({\n//             left: inputRect.left,\n//             width: inputRect.width,\n//             top:\n//                 direction === \"down\"\n//                     ? inputRect.bottom\n//                     : inputRect.top - dropdownHeight,\n//             direction,\n//         });\n//     };\n\n//     // keyboard navigation\n//     const handleKeyDown = (e: React.KeyboardEvent) => {\n//         if (!isOpen) return;\n\n//         if (e.key === \"ArrowDown\") {\n//             e.preventDefault();\n//             // highlightIndexRef.current += (highlightIndexRef.current < filteredOptions.length - 1) ? 1 : 0;\n//             const next = Math.min(\n//                 highlightIndexRef.current + 1,\n//                 filteredOptions.length - 1\n//             );\n//             updateHighlight(next);\n//             // setHighlightIndex((prev) =>\n//             //     prev < filteredOptions.length - 1 ? prev + 1 : prev\n//             // );\n//         }\n\n//         if (e.key === \"ArrowUp\") {\n//             e.preventDefault();\n//             // highlightIndexRef.current -= (highlightIndexRef.current > 0) ? 1 : 0;\n//             const prev = Math.max(highlightIndexRef.current - 1, 0);\n//             updateHighlight(prev);\n//             // setHighlightIndex((prev) => (prev > 0 ? prev - 1 : 0));\n//         }\n\n//         if (e.key === \"Enter\") {\n//             e.preventDefault();\n//             // const chosen = filteredOptions[highlightIndex];\n//             const chosen = filteredOptions[highlightIndexRef.current];\n//             if (chosen) {\n//                 handleOptionClick(chosen.value);\n//             }\n//         }\n//     };\n//     return (\n//         <div\n//             ref={containerRef}\n//             onClick={(e) => {\n//                 e.stopPropagation();  // prevent closing on option click bubbling\n//                 toggleDropdown();\n//             }}\n//             onKeyDown={handleKeyDown}\n//             tabIndex={0}\n//             className={`py-2 px-2 relative border-2 w-full h-12 flex justify-between items-center rounded-lg outline-none bg-transparent cursor-pointer ${inputStyles}`}\n//         >\n//             <span>{options.find((opt) => opt.value === value)?.label || ''}</span>\n//             <svg\n//                 className={`w-4 h-4 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n//                 fill=\"none\"\n//                 stroke=\"currentColor\"\n//                 viewBox=\"0 0 24 24\"\n//                 xmlns=\"http://www.w3.org/2000/svg\"\n//             >\n//                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path>\n//             </svg>\n//             {\n//                 isOpen && filteredOptions && (\n//                     <div\n//                         className=\"fixed z-10 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden\"\n//                         style={{\n//                             top: position?.top,\n//                             left: position?.left,\n//                             width: position?.width,\n//                             marginTop: position?.direction === \"up\" ? -4 : 4,\n//                         }}\n//                         onClick={(e) => e.stopPropagation()}\n//                     >\n//                         {/* ðŸ” Search box */}\n//                         {\n//                             seachable ? (\n//                                 <div className=\"p-2 border-b border-gray-200\">\n//                                     <input\n//                                         ref={searchRef}\n//                                         type=\"text\"\n//                                         placeholder=\"Search...\"\n//                                         className=\"w-full px-3 py-1 border rounded-lg bg-gray-50 outline-none\"\n//                                         // value={search}\n//                                         onChange={handleSearchChange}\n//                                         onClick={(e) => e.stopPropagation()}\n//                                     />\n//                                 </div>\n//                             ) : null\n//                         }\n//                         <div className=\"max-h-48 overflow-y-auto\" onClick={(e) => e.stopPropagation()}>\n//                             {\n//                                 isEmptyArray(filteredOptions) ? (\n//                                     <div className=\"p-4 text-gray-500\">\n//                                         No options found.\n//                                     </div>\n//                                 ) : null\n//                             }\n//                             {filteredOptions.map((option, index) => (\n//                                 <div\n//                                     key={option.value}\n//                                     onClick={(e) => {\n//                                         e.stopPropagation();\n//                                         handleOptionClick(option.value)\n//                                     }}\n//                                     ref={(el) => {\n//                                         if (el) optionRefs.current[index] = el;\n//                                     }}\n\n//                                     className={`\n//                                         py-2 px-4 hover:bg-blue-200\n//                                         ${value === option.value ? 'text-blue-700 font-medium pointer-events-none' : ''}\n//                                     `}\n//                                 >\n//                                     {option.label}\n//                                 </div>\n//                             ))}\n//                         </div>\n//                     </div>\n//                     // , document.body\n//                 )\n//             }\n//         </div>\n//     )\n// }\n\n// export default memo(DropdownModal)\n\n\n\n// <Options\n//     handleOptionClick={handleOptionClick}\n//     index={index}\n//     name={name}\n//     optionLabel={option.label}\n//     optionValue={option.value}\n//     value={value}\n//     highlightIndexRef={highlightIndexRef}\n// />\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import React, { FC, memo, RefObject, useEffect, useMemo, useRef, useState } from 'react'\n// import { useInputStore } from '../../../Hooks/useInputStore';\n// import { isEmptyArray } from '../../../Functions/dataTypesValidation';\n\n// interface DropdownOption {\n//     label: string;\n//     value: string;\n// }\n// interface DropdownModalProps {\n//     options: DropdownOption[];\n//     // containerRef: RefObject<HTMLDivElement>;\n//     onSelect: (value: string) => void;\n//     disabled: boolean;\n//     seachable: boolean;\n//     inputStyles?: string;\n//     onToggleDropdown?: (isOpen: boolean) => void;\n// }\n\n// const DropdownModal: FC<DropdownModalProps> = ({\n//     options,\n//     // containerRef,\n//     onSelect,\n//     disabled,\n//     seachable,\n//     inputStyles = '',\n//     onToggleDropdown,\n// }) => {\n//     const [isOpen, setIsOpen] = useState(false);\n//     const [value, setValue] = useState<string>('')\n//     const [search, setSearch] = useState<string>('')\n//     const [highlightIndex, setHighlightIndex] = useState<number>(0);\n//     const containerRef = useRef<HTMLDivElement>(null);\n//     const searchRef = useRef<HTMLInputElement>(null);\n//     useEffect(() => {\n//         const handleClickOutside = (event: MouseEvent) => {\n//             if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n//                 setIsOpen(false);\n//             }\n//         };\n//         document.addEventListener('mousedown', handleClickOutside);\n//         return () => {\n//             document.removeEventListener('mousedown', handleClickOutside);\n//         };\n//     }, []);\n//     const handleOptionClick = (selectedValue: string) => {\n//         setValue(selectedValue);\n//         onSelect(selectedValue);\n//         setIsOpen(false);\n//     }\n\n//     const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n//         setSearch(e.target.value)\n//         setHighlightIndex(0);\n//         // const searchValue = e.target.value\n//     }\n\n//     const filteredOptions = useMemo(() => {\n//         if (!search) return options;\n//         return options.filter(option =>\n//             option.label.toLowerCase().includes(search.toLowerCase())\n//         );\n//     }, [search, options]);\n//     const toggleDropdown = () => {\n//         if (disabled || isEmptyArray(options)) return\n//         onToggleDropdown && onToggleDropdown(isOpen);\n//         const newState = !isOpen;\n//         setIsOpen(newState);\n//         if (newState) {\n//             // focus search input after opening\n//             setTimeout(() => {\n//                 setHighlightIndex(0)\n//                 searchRef.current?.focus()\n//             }, 10);\n//         }\n//     };\n\n//     // const calculatePosition = () => {\n//     //     const rect = containerRef.current?.getBoundingClientRect();\n//     //     if (!rect) return;\n\n//     //     const spaceBelow = window.innerHeight - rect.bottom;\n//     //     const spaceAbove = rect.top;\n\n//     //     const dropdownHeight = Math.min(250, filteredOptions.length * 45);\n\n//     //     const direction = spaceBelow < dropdownHeight && spaceAbove > dropdownHeight\n//     //         ? \"up\"\n//     //         : \"down\";\n\n//     //     setPosition({\n//     //         left: rect.left,\n//     //         width: rect.width,\n//     //         top: direction === \"down\" ? rect.bottom : rect.top - dropdownHeight,\n//     //         direction,\n//     //     });\n//     // };\n\n//     // keyboard navigation\n//     const handleKeyDown = (e: React.KeyboardEvent) => {\n//         if (!isOpen) return;\n\n//         if (e.key === \"ArrowDown\") {\n//             e.preventDefault();\n//             setHighlightIndex((prev) =>\n//                 prev < filteredOptions.length - 1 ? prev + 1 : prev\n//             );\n//         }\n\n//         if (e.key === \"ArrowUp\") {\n//             e.preventDefault();\n//             setHighlightIndex((prev) => (prev > 0 ? prev - 1 : 0));\n//         }\n\n//         if (e.key === \"Enter\") {\n//             e.preventDefault();\n//             const chosen = filteredOptions[highlightIndex];\n//             if (chosen) {\n//                 handleOptionClick(chosen.value);\n//             }\n//         }\n//     };\n//     return (\n//         <div\n//             ref={containerRef}\n//             onClick={toggleDropdown}\n//             onKeyDown={handleKeyDown}\n//             tabIndex={0}\n//             className={`py-2 px-2 relative border-2 w-full h-12 flex justify-between items-center rounded-lg outline-none bg-transparent cursor-pointer ${inputStyles}`}\n//         >\n//             <span>{options.find((opt) => opt.value === value)?.label || ''}</span>\n//             <svg\n//                 className={`w-4 h-4 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n//                 fill=\"none\"\n//                 stroke=\"currentColor\"\n//                 viewBox=\"0 0 24 24\"\n//                 xmlns=\"http://www.w3.org/2000/svg\"\n//             >\n//                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path>\n//             </svg>\n//             {\n//                 isOpen && filteredOptions && (\n//                     <div\n//                         // className=\"absolute z-10 left-0 top-full mt-1 w-full bg-white border-gray-300 border rounded-lg shadow-lg max-h-48 overflow-y-auto\"\n//                         className=\"absolute left-0 z-10 top-full mt-1 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden\"\n//                         onClick={(e) => e.stopPropagation()}\n//                     >\n//                         {/* ðŸ” Search box */}\n//                         {\n//                             seachable ? (\n//                                 <div className=\"p-2 border-b border-gray-200\">\n//                                     <input\n//                                         ref={searchRef}\n//                                         type=\"text\"\n//                                         placeholder=\"Search...\"\n//                                         className=\"w-full px-3 py-1 border rounded-lg bg-gray-50 outline-none\"\n//                                         // value={search}\n//                                         onChange={handleSearchChange}\n//                                         onClick={(e) => e.stopPropagation()}\n//                                     />\n//                                 </div>\n//                             ) : null\n//                         }\n//                         <div className=\"max-h-48 overflow-y-auto\">\n//                             {\n//                                 isEmptyArray(filteredOptions) ? (\n//                                     <div className=\"p-4 text-gray-500\">\n//                                         No options found.\n//                                     </div>\n//                                 ) : null\n//                             }\n//                             {filteredOptions.map((option, index) => (\n//                                 <div\n//                                     key={option.value}\n//                                     onClick={() => handleOptionClick(option.value)}\n//                                     className={`\n//                                         ${(highlightIndex == index) ? 'bg-blue-100' : ''} py-2 px-4 hover:bg-blue-200\n//                                         ${value === option.value ? 'text-blue-700 font-medium pointer-events-none' : ''}\n//                                     `}\n//                                 >\n//                                     {option.label}\n//                                 </div>\n//                             ))}\n//                         </div>\n//                     </div>\n//                 )\n//             }\n//         </div>\n//     )\n// }\n\n// export default memo(DropdownModal)\n","export function shallowOrDeepEqual(a: any, b: any): boolean {\n    if (a === b) return true;\n\n    // handle null vs undefined\n    if (a == null || b == null) return a === b;\n\n    // different types\n    if (typeof a !== typeof b) return false;\n\n    // primitives handled above\n    if (typeof a !== \"object\") return a === b;\n\n    // Arrays\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) return false;\n        for (let i = 0; i < a.length; i++) {\n            if (!shallowOrDeepEqual(a[i], b[i])) return false;\n        }\n        return true;\n    }\n\n    // Objects\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n\n    if (aKeys.length !== bKeys.length) return false;\n\n    for (let key of aKeys) {\n        if (!b.hasOwnProperty(key)) return false;\n        if (!shallowOrDeepEqual(a[key], b[key])) return false;\n    }\n\n    return true;\n}\n","// OptionItem.tsx\nimport { memo, forwardRef, useCallback } from \"react\";\nimport { shallowOrDeepEqual } from \"../functions/shallowOrDeepEqual\";\n\ninterface Props {\n    label: string;\n    isSelected: boolean;\n    onSelect: () => void;\n    isHighlighted : boolean\n    optionClass: string;\n    name : string\n}\n\nconst OptionItem = forwardRef<HTMLDivElement, Props>(\n    ({label, isSelected, isHighlighted, onSelect, optionClass}, ref) => {\n        const handleClick = useCallback(() => {\n            onSelect()\n        },[onSelect])\n        return (\n            <div\n                ref={ref}\n                data-label={label}\n                onClick={handleClick}\n                className={`\n                    py-2 px-4 cursor-pointer hover:bg-blue-200\n                    ${isSelected ? \"text-blue-700 font-medium\" : \"\"}\n                    ${isHighlighted ? 'bg-blue-100' : ''}\n                    ${optionClass}\n                `}\n            >\n                {label}\n            </div>\n        );\n    }\n);\n\nexport default memo(OptionItem, (prev, next) => shallowOrDeepEqual(prev.optionClass, next.optionClass));\n","import { useMemo, useSyncExternalStore } from \"react\";\r\nimport { inputStore } from \"src/store/InputStore\";\r\n\r\nexport interface SelectOption {\r\n    label: string;\r\n    value: string;\r\n}\r\n\r\nexport interface OptionMap {\r\n    [key: string]: string[];\r\n}\r\n\r\nexport const useSelectOptions = ({\r\n//   name,\r\n  options,\r\n  dependsOn,\r\n  optionsMap,\r\n  initialLabel,\r\n  initialValue\r\n}: {\r\n  options?: SelectOption[] | string[]\r\n  dependsOn?: string\r\n  optionsMap?: OptionMap\r\n  initialLabel?: string\r\n  initialValue?: string\r\n}) => {\r\n  const depValue = dependsOn\r\n    ? useSyncExternalStore(\r\n        cb => inputStore.subscribe(dependsOn, cb),\r\n        () => inputStore.getInputNestedValue(dependsOn)\r\n      )\r\n    : null;\r\n\r\n  return useMemo(() => {\r\n    const base =\r\n      dependsOn && optionsMap\r\n        ? optionsMap[depValue ?? \"\"] ?? []\r\n        : options ?? [];\r\n\r\n    const normalized =\r\n      typeof base[0] === \"string\"\r\n        ? (base as string[]).map(v => ({ label: v, value: v }))\r\n        : base as SelectOption[];\r\n\r\n    return initialLabel\r\n      ? [{ label: initialLabel, value: initialValue! }, ...normalized]\r\n      : normalized;\r\n  }, [depValue, options, optionsMap, initialLabel, initialValue]);\r\n};\r\n","import React, { memo, useMemo } from 'react'\nimport { camelCase, fromCamelCase } from '../functions/camelCase';\nimport { isArray, isPlainObject } from '../functions/dataTypesValidation';\nimport StrInput from './StrInput';\nimport NumInput from './NumInput';\nimport ArrayContainer from './ArrayContainer';\nimport ObjectContainer from './ObjContainer';\nimport { useNameScope } from '../context/NameScopeContext';\nimport type { InputProps } from '../typeDeclaration/inputProps';\nimport { inputStore } from 'src/store/InputStore';\n\ninterface FullAutoInputProps {\n    initialData?: object\n    exclusionKeys?: string | string[]\n    onInputChange?: () => void\n    sharedStyles?: object\n    name?: undefined\n    bgColor?: string\n}\n\ntype AutoInputProps = Omit<FullAutoInputProps, \"sharedStyles\" | \"bgColor\" | \"onInputChange\">\n\nconst AutoInput: React.FC<AutoInputProps> = ({ initialData, exclusionKeys }) => {\n    // const setInputValue = useInputStore((state) => state.setInputValue)\n    // const { name, ...rest } = props\n    const scope = useNameScope() ?? ''\n    const excludedKeys = useMemo(() => {\n        if (!exclusionKeys) return [];\n        return isArray(exclusionKeys)\n            ? exclusionKeys.map(camelCase)\n            : [camelCase(exclusionKeys)];\n    }, [exclusionKeys]);\n    const inputFields = useMemo(() => {\n        return initialData ?? inputStore.getSnapshot().inputData;\n    }, [initialData]);\n    if (!inputFields) return null\n\n    const renderField = (\n        key: string,\n        value: any,\n        scope: string\n    ): React.ReactNode => {\n        const modifiedKey = scope ? `${scope}.${key}` : key\n        const commonProps : InputProps = {\n            initialValue: value,\n            name: key,\n            placeholder: fromCamelCase(key),\n        }\n\n        // primitive\n        if (typeof value === 'string') {\n            return <StrInput key={modifiedKey} {...commonProps} />\n        }\n\n        if (typeof value === 'number') {\n            return <NumInput key={modifiedKey} {...commonProps} />\n        }\n\n        // array\n        if (Array.isArray(value)) {\n            return (\n                <ArrayContainer\n                    key={key}\n                    name={key}\n                    items={value}\n                    getKey={(_, i) => `${modifiedKey}.${i}`}\n                >\n                    {(item) => (\n                        <AutoInput initialData={item} />\n                    )}\n                </ArrayContainer>\n            )\n        }\n\n        // object\n        if (isPlainObject(value)) {\n            return (\n                <ObjectContainer key={modifiedKey} name={key}>\n                    <AutoInput initialData={value} />\n                </ObjectContainer>\n            )\n        }\n\n        return null\n    }\n\n    return (\n        <>\n            {\n                Object.entries(inputFields).map(([key, value]) => {\n                    if (excludedKeys.includes(key)) return null;\n\n                    return renderField(key, value, scope)\n                })\n            }\n        </>\n    )\n}\n\n// 1. Export the memoized component\nconst MemoizedAutoInput = memo(AutoInput)\n\n// 2. Set the displayName on the exported component\nMemoizedAutoInput.displayName = 'AutoInput';\n\nexport default MemoizedAutoInput;\n\n// export default memo(AutoInput)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import React, { memo, useEffect, useMemo, useState } from 'react'\n// import { camelCase, fromCamelCase } from '../functions/camelCase';\n// import { isArray } from '../functions/dataTypesValidation';\n// import StrInput from './StrInput';\n// import NumInput from './NumInput';\n// import { inputStore } from '../InputStore';\n// interface mongoProps {\n//     key: string\n//     value: string | number\n// }\n\n// interface FullAutoInputProps {\n//     initialData?: object\n//     exclusionKeys?: string | string[]\n//     onInputChange?: () => void\n//     sharedStyles?: object\n//     name?: undefined\n//     bgColor? : string\n// }\n\n// type AutoInputProps = Omit<FullAutoInputProps, \"sharedStyles\" | \"bgColor\" | \"onInputChange\">\n\n// const AutoInput: React.FC<AutoInputProps> = ({ initialData, exclusionKeys, ...props }) => {\n//     // const setInputValue = useInputStore((state) => state.setInputValue)\n//     const { name, ...rest } = props\n//     const excludedKeys = useMemo(() => {\n//         if (!exclusionKeys) return [];\n//         return isArray(exclusionKeys)\n//             ? exclusionKeys.map(camelCase)\n//             : [camelCase(exclusionKeys)];\n//     }, [exclusionKeys]);\n//     const inputFields = useMemo<mongoProps[]>(() => {\n//         const data = initialData ?? inputStore.getSnapshot().inputData;\n\n//         if (!data) return [];\n\n//         if (!initialData) return Object.entries(data).map(([key, value]) => ({ key, value }));\n\n//         // Also set the data in store when `initialData` is present\n//         const normalized = Object.fromEntries(\n//             Object.entries(initialData).map(([key, val]) => [key, val === 0 ? \"\" : val])\n//         );\n//         // useInputStore.getState().setInitialInputData(normalized);\n//         inputStore.setInitialData(normalized)\n\n//         return Object.entries(normalized).map(([key, value]) => ({ key, value }));\n//     }, [initialData]);\n//     return (\n//         <>\n//             {\n//                 inputFields.map(({ key, value }) => {\n//                     if (excludedKeys.includes(key)) return null;\n\n//                     const commonProps = {\n//                         name: key,\n//                         placeholder: fromCamelCase(key),\n//                         sharedStyles: (props as FullAutoInputProps).sharedStyles,\n//                         bgColor: (props as FullAutoInputProps).bgColor,\n//                         ...rest\n//                     };\n\n//                     return typeof value === \"number\" ? (\n//                         <NumInput key={key} {...commonProps} />\n//                     ) : (\n//                         <StrInput key={key} {...commonProps} />\n//                     );\n//                 })\n//             }\n//         </>\n//     )\n// }\n\n// // 1. Export the memoized component\n// const MemoizedAutoInput = memo(AutoInput)\n\n// // 2. Set the displayName on the exported component\n// MemoizedAutoInput.displayName = 'AutoInput';\n\n// export default MemoizedAutoInput;\n\n// // export default memo(AutoInput)\n","import React, { type FC, memo, useEffect } from 'react';\n// import PickDate from './PickDate';\nimport { getDate } from '../functions/dateHelper';\nimport { useInputStore } from '../hooks/useInputStore';\nimport InputTemplate from './InputTemplate';\nimport { type InputProps } from '../typeDeclaration/inputProps';\nimport { useComputedExpression } from '../hooks/useComputedExpression';\nimport { useFieldName } from '../hooks/useFieldName';\nimport { handleInitialValue } from '../Utils/setInitialValue';\nimport { inputStore } from 'src/store/InputStore';\n\ninterface DateProps extends InputProps {\n    onDateSelect?: (date: string) => void\n    defaultTodayDate?: boolean\n    defaultDate?: string\n}\n\nconst DateInput: FC<DateProps> = ({\n    placeholder,\n    onDateSelect,\n    onEnterPress = () => { },\n    defaultTodayDate = false,\n    disabled = false,\n    hideElement = false,\n    containerStyles = \"\",\n    inputStyles = \"\",\n    placeholderStyles = \"\",\n    defaultDate,\n    name,\n    ...props\n}) => {\n    const modifiedName = useFieldName(placeholder, name)\n    const todayDate = new Date().toISOString()\n\n    const initialDate = defaultTodayDate ? getDate(todayDate)!.getFormat('dd-mm-yyyy') : \"\"\n    useEffect(() => {\n        handleInitialValue(modifiedName, initialDate)\n    }, [])\n    const handleDateSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const newDate = e.target.value;\n        inputStore.setValue(modifiedName, newDate)\n        // (props as FullInputProps).onInputChange(name!, newDate)\n        onDateSelect?.(newDate)\n    };\n\n    const value = useInputStore(modifiedName) ?? \"\"\n\n    const disabledValue: boolean = useComputedExpression(disabled)\n\n    const hiddenValue: boolean = useComputedExpression(hideElement)\n\n    return (\n        <>\n            <InputTemplate\n                name={modifiedName}\n                value={value}\n                handleChange={handleDateSelect}\n                onEnterPress={onEnterPress}\n                placeholder={placeholder}\n                disabled={disabledValue}\n                hideElement={hiddenValue}\n                type='date'\n                containerStyles={containerStyles}\n                inputStyles={inputStyles}\n                placeholderStyles={placeholderStyles}\n                {...props}\n            />\n        </>\n    );\n};\n\nconst memoizedDateInput = memo(DateInput)\nmemoizedDateInput.displayName = 'DateInput'\nexport default memoizedDateInput\n\n// export default memo(DateInput);\n{/* <div className=\"relative w-full group border-2 rounded-lg\">\n    <input\n        type=\"date\"\n        value={value}\n        // defaultValue={initialDate}\n        onChange={e => handleDateSelect(e.target.value)}\n        id='customDate'\n        className={'py-2 px-2 w-max bg-transparent appearance-none peer'} />\n    <label\n        htmlFor={'customDate'}\n        className=\"absolute left-5 px-1 bg-gray-400 duration-300 transform -translate-y-6 scale-75 top-2 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-[85%] peer-focus:-translate-y-6\"\n        >\n        {placeholder}\n    </label>\n</div> */}\n{/* <PickDate onDateSelect={handleDateSelect} id={'customDate'} dateStyles={'py-2 px-2 w-full bg-transparent appearance-none peer'} /> */ }","type DateFormatToken = 'dd' | 'mm' | 'yyyy' | 'MonthName';\n\nconst MonthName: Record<string, string> = {\n    '01': 'January',\n    '02': 'February',\n    '03': 'March',\n    '04': 'April',\n    '05': 'May',\n    '06': 'June',\n    '07': 'July',\n    '08': 'August',\n    '09': 'September',\n    '10': 'October',\n    '11': 'November',\n    '12': 'December',\n}\nconst MonthNumber: Record<string, string> = {\n    'january': '01',\n    'february': '02',\n    'march': '03',\n    'april': '04',\n    'may': '05',\n    'june': '06',\n    'july': '07',\n    'august': '08',\n    'september': '09',\n    'october': '10',\n    'november': '11',\n    'december': '12',\n}\n\nconst getMonthNumber = (monthName: string) => {\n    return MonthNumber[monthName.toLowerCase()]\n}\n\nconst formatDateWithSuffix = (dateString: string) => {\n    const date = new Date(dateString);\n\n    const day = date.getDate();\n    const month = date.toLocaleString('default', { month: 'long' });\n    const year = date.getFullYear();\n\n    const getDaySuffix = (d: any) => {\n        if (d > 3 && d < 21) return 'th'; // for 11thâ€“13th\n        switch (d % 10) {\n            case 1: return 'st';\n            case 2: return 'nd';\n            case 3: return 'rd';\n            default: return 'th';\n        }\n    };\n\n    return `${day}${getDaySuffix(day)} ${month} ${year}`;\n}\n\ntype ParsedDate = {\n    day: string;\n    month: string;\n    monthName: string\n    year: string;\n    getFormat: (format?: string) => string;\n};\n\nconst getDate = (date: string): ParsedDate | null => {\n    // Match patterns like 21-04-2024, 2024/04/21, etc.\n    const pattern = /(\\d{4})[-\\/.](\\d{1,2})[-\\/.](\\d{1,2})|(\\d{1,2})[-\\/.](\\d{1,2})[-\\/.](\\d{4})|(\\d{1,2})(st|nd|rd|th)?\\s+([A-Za-z]+)\\s+(\\d{4})/\n    const match = date.match(pattern)\n\n    if (!match) return null\n\n    const normalize = (val: string) => val.padStart(2, '0');\n\n    let day = '';\n    let month = '';\n    let year = '';\n    let suffix = '';\n\n    if (match[1]) {\n        // yyyy-mm-dd format\n        year = match[1]\n        month = normalize(match[2])\n        day = normalize(match[3])\n    } else if (match[4]) {\n        // dd-mm-yyyy format\n        day = normalize(match[4])\n        month = normalize(match[5])\n        year = match[6]\n    } else {\n        // 23rd April 2025 format\n        day = match[7]\n        suffix = match[8]\n        month = getMonthNumber(match[9])\n        year = match[10]\n    }\n\n    const monthName = MonthName[month] ?? 'Unknown'\n\n    const tokenMap: Record<DateFormatToken, string> = {\n        dd: day,\n        mm: month,\n        yyyy: year,\n        MonthName: monthName,\n    };\n\n    return {\n        day,\n        month,\n        year,\n        monthName,\n        getFormat: (format: string = 'yyyy-mm-dd') =>\n            format.replace(/dd|mm|yyyy|MonthName/g, (token) => {\n                return token in tokenMap ? tokenMap[token as DateFormatToken] : token\n            }),\n    }\n}\n\nexport { formatDateWithSuffix, getDate }\n\n\n\n\n// return {\n//         day,\n//         month,\n//         year,\n//         monthName,\n//         getFormat: (format: string = 'yyyy-mm-dd') =>\n//             format.replace(/dd|mm|yyyy|MonthName/g, (token : DateFormatToken) => {\n//                 switch (token) {\n//                     case 'dd':\n//                         return day;\n//                     case 'mm':\n//                         return month;\n//                     case 'yyyy':\n//                         return year;\n//                     case 'MonthName':\n//                         return monthName;\n//                     default:\n//                         return token;\n//                 }\n//             }),\n//     }","import  { type FC, memo, useEffect } from 'react';\nimport InputTemplate from './InputTemplate';\nimport { useFieldName } from '../hooks/useFieldName';\nimport { handleInitialValue } from '../Utils/setInitialValue';\n\ninterface FullDisabledProps {\n    initialValue?: string;\n    containerStyles?: string;\n    inputStyles?: string;\n    placeholderStyles?: string;\n    placeholder: string;\n    onChange?: (value: string | number, data: string | null) => void\n    name?: string;\n    isArrayObject?: boolean;\n    arrayData?: {\n        arrayName: string;\n        arrayIndex: number;\n    };\n    onInputChange: (name: string, value: string) => void;\n}\n\ntype DisabledInputProps = Omit<FullDisabledProps, \"isArrayObject\" | \"arrayData\" | \"onInputChange\">;\n\nconst DisabledInput: FC<DisabledInputProps> = ({\n    initialValue = \"\",\n    containerStyles = \"\",\n    placeholder,\n    onChange = () => { },\n    inputStyles,\n    placeholderStyles,\n    name,\n    ...props\n}) => {\n    const modifiedName = useFieldName(placeholder, name)\n\n    useEffect(() => {\n        handleInitialValue(modifiedName, initialValue)\n    }, [])\n\n    // const value = useInputStore(modifiedName)\n\n    useEffect(() => {\n        onChange(initialValue, null)\n        // inputStore.setValue(modifiedName, initialValue);\n    }, [modifiedName]);\n\n    return (\n        <>\n            <InputTemplate\n                name={name!}\n                value={initialValue}\n                placeholder={placeholder}\n                disabled={true}\n                type='text'\n                containerStyles={containerStyles}\n                inputStyles={`bg-gray-300 ${inputStyles}`}\n                placeholderStyles={placeholderStyles}\n                {...props}\n            />\n        </>\n    );\n};\n\n// 1. Export the memoized component\nconst MemoizedDisabledInput = memo(DisabledInput)\n\n// 2. Set the displayName on the exported component\nMemoizedDisabledInput.displayName = 'DisabledInput';\n\nexport default MemoizedDisabledInput;\n\n// export default memo(DisabledInput);\n{/* <input\n    type=\"text\"\n    id={`floating_input_${modifiedName}`}\n    value={value}\n    className=\"py-2 px-2 border-2 w-full rounded-lg bg-transparent appearance-none peer\"\n    placeholder=\" \"\n    required\n    disabled\n/>\n<label\n    htmlFor={`floating_input_${modifiedName}`}\n    className=\"absolute left-5 px-1 bg-gray-400 duration-300 transform -translate-y-6 scale-75 top-2 z-10 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-[85%] peer-focus:-translate-y-6\"\n>\n    {placeholder}\n</label> */}","import React, { forwardRef, memo, type ReactElement, type ReactNode, useCallback, useImperativeHandle, useState } from 'react'\nimport { getEditedData } from '../Utils/getEditedData';\nimport { inputStore } from 'src/store/InputStore';\n\n// Define the arguments object for clarity\ntype SubmitData = {\n  data: Record<string, any> | null;\n  edited: Record<string, any> | null;\n  resetForm: (key?: string[] | string) => void;\n};\n\n// Define the exact type signature for the handler function\nexport type SubmitHandler = (args: SubmitData) => Promise<boolean | void>;\n\nexport interface ConfirmationRenderProps {\n  success: (data?: any) => void\n  cancel: () => void\n  data: Record<string, any> | null\n  isDisabled?: boolean\n  resetForm: (key?: string[] | string) => void\n}\n\nexport interface SubmitButtonRef {\n  submit: () => void\n}\n\n\ninterface SubmitProps {\n  children: ReactNode\n  className?: string\n  disabled?: boolean\n  closeModal?: () => void\n  onClick?: SubmitHandler\n  /**\n   * Configuration for enabling and customizing a confirmation modal.\n   * If provided, the final action (onConfirm) is only executed after the user confirms inside the modal.\n   * * @example\n   * // Assuming ConfirmComponent is a function that takes ConfirmationRenderProps\n   * modal: {\n   * modalStyle: { width: '50%' }  // width and height can be in % or px or simple number\n   * renderConfirmationModel: (props) => <ConfirmComponent {...props} />,  // prefered to be used as function\n   * isDisabled : false    // if you want to disable the cornfirmation modal submit button conditionally\n   * onConfirm: handleSubmitFunction,    \n   * }\n   */\n  modal?: {\n    modalStyle?: { height?: string | number, width?: string | number }\n    renderConfirmationModel?: ((props: ConfirmationRenderProps) => ReactNode) | ReactElement<ConfirmationRenderProps>\n    isDisabled?: boolean\n    onConfirm?: (data: any) => void\n  }\n}\n\nconst SubmitButton = forwardRef<SubmitButtonRef, SubmitProps>((\n  {\n    children,\n    className,\n    closeModal,\n    disabled = false,\n    onClick,\n    modal,\n  },\n  ref\n) => {\n  const { isDisabled = false, modalStyle, onConfirm, renderConfirmationModel } = modal || {}\n  // const { height, width } = modal.modelStyle\n  const [openModal, setOpenModal] = useState<boolean>(false)\n  const [modelData, setModelData] = useState<Record<string, any> | null>(null)\n  const success = (data?: any) => {\n    onConfirm?.(data)\n    setOpenModal(false)\n    resetForm()\n    closeModal?.()\n  }\n  const cancel = () => {\n    setOpenModal(false)\n  }\n  // const resetForm = useResetForm\n  const resetForm = inputStore.reset()\n  const handleSubmit = useCallback(async () => {\n    if (disabled || openModal) return\n    // if (renderConfirmationModel) setOpenModal(true)\n    // const { inputData: data } = useInputStore.getState()\n    const { data, edited } = getEditedData()\n    setModelData(data)\n\n    // ðŸ”¹ CASE 1: No onClick â†’ open modal directly\n    if (!onClick && renderConfirmationModel) {\n      setOpenModal(true)\n      return\n    }\n    // onClick && onClick({ data, resetForm })\n    // ðŸ”¹ CASE 2 & 3: onClick exists\n    if (onClick) {\n      const shouldOpenModal = await onClick({ data, edited, resetForm })\n\n      if (shouldOpenModal && renderConfirmationModel) {\n        setOpenModal(true)\n      }\n    }\n  }, [onClick, disabled, openModal, renderConfirmationModel])\n\n  // ðŸ”‘ Expose submit() safely\n  useImperativeHandle(ref, () => ({\n    submit: handleSubmit\n  }), [handleSubmit])\n\n  return (\n    <div className={`${className}`} onClick={handleSubmit}>\n      {children}\n      {\n        openModal ? (\n          <div\n            className={`fixed flex cursor-default justify-center items-center z-50 left-0 top-0 w-full h-full bg-gray-500/50 backdrop-blur-lg `}\n          >\n            <div\n              className={`relative grid rounded-lg shadow-lg bg-gray-400 overflow-y-auto max-h-4/5`}\n              style={{ height: modalStyle?.height, width: modalStyle?.width || '80%' }}\n            >\n              <div className=''>\n                {typeof renderConfirmationModel === 'function'\n                  ? renderConfirmationModel({ cancel, success, resetForm, data: modelData, isDisabled })\n                  : React.isValidElement(renderConfirmationModel)\n                    ? React.cloneElement(renderConfirmationModel, { cancel, success, resetForm, data: modelData, isDisabled })\n                    : null}\n              </div>\n            </div>\n          </div>\n        ) : null\n      }\n    </div>\n  )\n})\n\n// 1. Export the memoized component\nconst MemoizedSubmitButton = memo(SubmitButton)\n\n// 2. Set the displayName on the exported component\nMemoizedSubmitButton.displayName = 'SubmitButton';\n\nexport default MemoizedSubmitButton;\n\n// export default memo(SubmitButton)\n\n\n\n\n\n// import React, { FC, memo, useCallback } from 'react';\n// import { useInputStore } from '../hooks/useInputStore';\n// import { useResetForm } from 'src/hooks/useResetForm';\n\n// // Define the exact type signature for the handler function\n// // This is the type that will provide the suggestions!\n// export type SubmitHandler = (args: {\n//     data: Record<string, any>;\n//     resetForm: () => void;\n// }) => void;\n\n// interface SubmitButtonProps {\n//   children: React.ReactNode;\n//   className?: string;\n//   // onClick: (inputData: any) => void; // Replace 'any' with the actual type of inputData if known\n//   onClick : SubmitHandler\n// }\n\n// const SubmitButton: FC<SubmitButtonProps> = ({ children, className, onClick }) => {\n//   const resetForm = useResetForm()\n//   const handleSubmit = useCallback(() => {\n//     const { inputData : data } = useInputStore.getState();\n//     onClick({data, resetForm});\n//   }, [onClick]);\n\n//   return (\n//     <button className={className} onClick={handleSubmit}>\n//       {children}\n//     </button>\n//   );\n// };\n\n// export default memo(SubmitButton);","import { inputStore } from \"src/store/InputStore\"\nimport { getNestedValue } from \"./inputStoreUtils\"\n\n\nexport const getEditedData = () : { data: Record<string, any> | null, edited: Record<string, any> | null } => {\n    const { editedKeys, inputData } = inputStore.getSnapshot()\n    const edited: Record<string, any> = {}\n\n    if (!editedKeys || editedKeys.size === 0) {\n        return {\n            data: inputData,\n            edited: null,\n        }\n    }\n    editedKeys.forEach((key) => {\n        edited[key] = getNestedValue(inputData, key)\n    })\n    return {\n        data: inputData,\n        edited,\n    }\n}\n\n// return {\n//     data: state.inputData,\n//     edited,\n// }\n// }\n","import React, { type FC, type ReactNode, type RefObject, useEffect, useMemo, useRef, useState } from 'react'\nimport { memo } from 'react'\nimport { inputStore } from 'src/store/InputStore';\n\ninterface InputContainerProps {\n  children: ReactNode;\n  inputContainerStyles?: string;\n  mode?: \"default\" | \"edit\"\n  // sharedStyles?: object\n  sharedStyles?: {\n    placeholderStyles?: string\n    inputStyles?: string\n    [key: string]: any\n  }\n  modalContainerRef?: RefObject<HTMLDivElement>\n}\n\ninterface InputChildProps {\n  onInputChange: (modifiedName: string, value: any) => void;\n  [key: string]: any; // optional if child has more props\n}\n\nconst InputContainer: FC<InputContainerProps> = ({ children, inputContainerStyles, sharedStyles, modalContainerRef, mode = \"default\" }) => {\n\n  const containerRef = useRef<HTMLDivElement | null>(null)\n\n  const initialRender = useRef(true)\n\n  if (initialRender.current) {\n    inputStore.initializeInputStore(mode)\n    initialRender.current = false\n  }\n\n  /////// This useeffect sets the background color so that strike-through effect in inputs are flawless\n  useEffect(() => {\n    if (containerRef.current instanceof HTMLElement) {\n      let current: HTMLElement | null = containerRef.current;\n      // let backgroundColor: string | null = null;\n      let backgroundColor: string = '';\n\n      while (current) {\n        const style = window.getComputedStyle(current);\n        // const bg = style.backgroundColor;\n        backgroundColor = style.backgroundColor;\n        if (backgroundColor && backgroundColor !== 'rgba(0, 0, 0, 0)' && backgroundColor !== 'transparent') {\n          // backgroundColor = bg\n          break; // found non-transparent background\n        }\n        current = current.parentElement;\n      }\n      if (backgroundColor == 'rgba(0, 0, 0, 0)' || backgroundColor == '') inputStore.setBackgroundColor('white')\n      else inputStore.setBackgroundColor(backgroundColor)\n    }\n    return () => {\n      inputStore.clear()\n    }\n  }, []);\n\n  return (\n    <div ref={containerRef} className={inputContainerStyles}>\n      {children}\n    </div>\n  )\n}\n\nexport default memo(InputContainer)\n\n\n\n\n// import React, { FC, ReactNode, RefObject, useEffect, useMemo, useRef, useState } from 'react'\n// import { memo } from 'react'\n// import { useInputStore } from '../hooks/useInputStore'\n// import { camelCase } from 'src/functions/camelCase';\n// import { flattenChildren } from 'src/Utils/flattenChildren';\n// import { handleInitialValue } from 'src/Utils/setInitialValue';\n\n// interface InputContainerProps {\n//   children: ReactNode;\n//   inputContainerStyles?: string;\n//   // sharedStyles?: object\n//   sharedStyles?: {\n//     placeholderStyles?: string\n//     inputStyles?: string\n//     [key: string]: any\n//   }\n//   modalContainerRef?: RefObject<HTMLDivElement>\n// }\n\n// interface InputChildProps {\n//   onInputChange: (modifiedName: string, value: any) => void;\n//   [key: string]: any; // optional if child has more props\n// }\n\n// const InputContainer: FC<InputContainerProps> = ({ children, inputContainerStyles, sharedStyles, modalContainerRef }) => {\n//   const setInputValue = useInputStore((state) => state.setInputValue)\n\n//   const containerRef = useRef<HTMLDivElement | null>(null)\n//   const [bgColor, setBgColor] = useState(\"\");\n\n//   const handleInputChange = (modifiedName: string, value: any): void => {\n//     setInputValue(modifiedName, value)\n//   }\n//   const childrenArray = useMemo(() => flattenChildren(children), [children]);\n\n//   /////// This useeffect sets the background color so that strike-through effect in inputs are flawless\n//   useEffect(() => {\n//     if (containerRef.current instanceof HTMLElement) {\n//       let current: HTMLElement | null = containerRef.current;\n//       // let backgroundColor: string | null = null;\n//       let backgroundColor: string = '';\n\n//       while (current) {\n//         const style = window.getComputedStyle(current);\n//         // const bg = style.backgroundColor;\n//         backgroundColor = style.backgroundColor;\n//         if (backgroundColor && backgroundColor !== 'rgba(0, 0, 0, 0)' && backgroundColor !== 'transparent') {\n//           // backgroundColor = bg\n//           break; // found non-transparent background\n//         }\n//         current = current.parentElement;\n//       }\n//       if (backgroundColor == 'rgba(0, 0, 0, 0)' || backgroundColor == '') setBgColor('white')\n//       else setBgColor(backgroundColor)\n//       // setBgColor(backgroundColor ?? 'white')\n//       // setContainerBgColor(backgroundColor || 'white'); // fallback just in case\n//     }\n//   }, []);\n\n//   return (\n//     <div ref={containerRef} className={inputContainerStyles}>\n//       {\n//         // React.Children.map(children, (child) => {\n//         childrenArray.map((child, index) => {\n//           if (!React.isValidElement<InputChildProps>(child)) return null;\n//           const childType = child.type\n//           // const childSafe = child as React.ReactElement<InputChildProps>\n//           const isDOMElement = typeof childType === 'string';\n//           if (isDOMElement) return child;\n//           const childProps = child.props\n//           const modifiedName = (childProps.name || childProps.placeholder) ? childProps.name || camelCase(childProps.placeholder) : undefined\n//           if (childProps.placeholder) {\n//             handleInitialValue(modifiedName, childProps.initialValue, setInputValue, (childType as any).type.name)\n//           }\n//           if (React.isValidElement(child)) {\n//             return React.cloneElement(child, {\n//               key: child.key ?? index,\n//               onInputChange: handleInputChange,\n//               name: modifiedName,\n//               sharedStyles,\n//               bgColor,\n//               modalContainerRef\n//             })\n//           }\n//           return child\n//         })\n//       }\n//     </div>\n//   )\n// }\n\n// export default memo(InputContainer)","import { inputStore } from \"src/store/InputStore\"\r\n\r\nexport const setEditData = (data : Record<string, any>) => {\r\n    inputStore.setEditData(data)\r\n}","import { inputStore } from \"src/store/InputStore\"\r\n\r\nexport const ResetForm = (resetData?: Record<string, any>) => {\r\n    return inputStore.reset(resetData)\r\n}"],"mappings":"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","names":["index_exports","__export","ArrayContainer_default","AutoInput_default","DateInput_default","DisabledInput_default","InputContainer_default","NumInput_default","ObjContainer_default","ResetForm","SelectInput_default","StrInput_default","SubmitButton_default","setEditData","setFieldValue","__toCommonJS","styleInject","css","insertAt","head","style","styleInject","import_react","import_react","isArray","arr","isPlainObject","obj","isEmptyArray","getNestedValue","obj","path","curr","key","isIndex","InputStore","value","key","listener","isArray","k","l","i","fn","mode","color","data","obj","prefix","paths","path","isDisabledInput","inputData","prev","initial","nextData","keys","curr","nextKey","isIndex","index","lastKey","next","_","item","inputStore","useInputStore","key","valueRef","initialRender","listener","inputStore","value","import_react","expressionCacheNew","compileExpression","expr","deps","jsExpr","_","key","fn","compiled","data","getNestedValue","useComputedExpression","expr","name","deps","evaluate","compileExpression","cb","unsubscribers","k","inputStore","u","import_react","import_jsx_runtime","InputTemplate","name","type","placeholder","maxLength","value","onBlur","autoFocus","onEnterPress","onFocus","disabled","hideElement","handleChange","containerStyles","inputStyles","placeholderStyles","props","ref","pattern","inputRef","match","dynamicHeight","labelRef","bgColor","inputStore","handlePreInput","e","evalue","handleBlur","data","handleFocus","handleKeyPresses","event","labelWidth","setLabelWidth","InputTemplate_default","handleInitialValue","path","initialValue","compName","value","inputStore","import_react","NameScopeContext","useNameScope","camelCase","str","match","chr","fromCamelCase","char","useFieldName","placeholder","name","parent","useNameScope","local","camelCase","import_jsx_runtime","StrInput","placeholder","containerStyles","onEnterPress","onBlur","onDisableChange","maxLength","autoFocus","privacy","disabled","hideElement","inputStyles","placeholderStyles","onChange","initialValue","name","props","ref","modifiedName","useFieldName","handleInitialValue","value","useInputStore","disabledValue","useComputedExpression","hiddenValue","InputTemplate_default","e","inputStore","MemoizedStrInput","StrInput_default","import_react","setFieldValue","FieldCredentials","keys","key","inputStore","isIndex","key","import_jsx_runtime","NumInput","placeholder","onEnterPress","onBlur","containerStyles","stringify","autoFocus","privacy","disabled","hideElement","onDisableChange","maxLength","inputStyles","placeholderStyles","onChange","initialValue","name","props","ref","modifiedName","useFieldName","handleInitialValue","value","useInputStore","stringValidation","data","handleOnDisableChange","setFieldValue","disabledValue","useComputedExpression","hiddenValue","currentDisabled","inputStore","prevValueRef","isIndex","InputTemplate_default","e","inputVal","newValue","MemoizedNumInput","NumInput_default","import_react","import_jsx_runtime","ArrayContainer","name","items","getKey","children","defaultAddItem","initialRender","parent","useNameScope","arrayScope","inputStore","dynamicItem","cb","helpers","addItem","index","item","scope","modifiedKey","NameScopeContext","ArrayContainer_default","import_react","import_jsx_runtime","ObjectContainer","name","children","parent","useNameScope","scope","NameScopeContext","MemoizedObjectContainer","ObjContainer_default","import_react","import_react","import_react","shallowOrDeepEqual","a","b","i","aKeys","bKeys","key","import_react","import_jsx_runtime","OptionItem","label","isSelected","isHighlighted","onSelect","optionClass","ref","handleClick","OptionItem_default","prev","next","shallowOrDeepEqual","import_jsx_runtime","DropdownModal","options","onSelect","onToggleDropdown","disabled","seachable","name","styles","modalContainerRef","isOpen","setIsOpen","value","useInputStore","search","setSearch","highlightIndexRef","optionRefs","position","setPosition","inputRef","modalRef","searchRef","handleClickOutside","event","closeDropdown","handleOptionClick","selectedValue","handleOptionSelect","option","handleSearchChange","e","updateHighlight","filteredOptions","lowered","opt","optionRefsCallback","el","label","idx","o","calculatePosition","inputRect","modalContainer","modalRect","dropdownRect","spaceBelow","spaceAbove","direction","scrollOffset","top","openDropdown","newIndex","oldIndex","handleKeyDown","next","prev","chosen","dropdownPanel","isEmptyArray","index","OptionItem_default","portalTarget","DropdownModal_default","shallowOrDeepEqual","import_jsx_runtime","SelectTemplate","name","placeholder","options","onSelect","onToggleDropdown","disabled","hideElement","seachable","styles","makeEmptyDisabled","props","fullProps","labelRef","labelWidth","setLabelWidth","handleSelect","selectedValue","DropdownModal_default","SelectTemplate_default","import_react","useSelectOptions","options","dependsOn","optionsMap","initialLabel","initialValue","depValue","cb","inputStore","base","normalized","v","import_jsx_runtime","SelectInput","name","placeholder","options","onChange","dependsOn","onToggleDropdown","optionsMap","initialLabel","disabled","hideElement","searchable","onDisableChange","initialValue","styles","props","modifiedName","useFieldName","handleOnDisableChange","value","setFieldValue","handleInitialValue","disabledValue","useComputedExpression","hiddenValue","currentDisabled","inputStore","staticOptions","useSelectOptions","SelectTemplate_default","selectedValue","MemoizedSelectInput","prev","next","SelectInput_default","import_react","import_jsx_runtime","AutoInput","initialData","exclusionKeys","scope","useNameScope","excludedKeys","isArray","camelCase","inputFields","inputStore","renderField","key","value","modifiedKey","commonProps","fromCamelCase","StrInput_default","NumInput_default","ArrayContainer_default","_","i","item","isPlainObject","ObjContainer_default","MemoizedAutoInput","AutoInput_default","import_react","MonthName","MonthNumber","getMonthNumber","monthName","getDate","date","pattern","match","normalize","val","day","month","year","suffix","getMonthNumber","monthName","MonthName","tokenMap","format","token","import_jsx_runtime","DateInput","placeholder","onDateSelect","onEnterPress","defaultTodayDate","disabled","hideElement","containerStyles","inputStyles","placeholderStyles","defaultDate","name","props","modifiedName","useFieldName","todayDate","initialDate","getDate","handleInitialValue","handleDateSelect","e","newDate","inputStore","value","useInputStore","disabledValue","useComputedExpression","hiddenValue","InputTemplate_default","memoizedDateInput","DateInput_default","import_react","import_jsx_runtime","DisabledInput","initialValue","containerStyles","placeholder","onChange","inputStyles","placeholderStyles","name","props","modifiedName","useFieldName","handleInitialValue","InputTemplate_default","MemoizedDisabledInput","DisabledInput_default","import_react","getEditedData","editedKeys","inputData","inputStore","edited","key","getNestedValue","import_jsx_runtime","SubmitButton","children","className","closeModal","disabled","onClick","modal","ref","isDisabled","modalStyle","onConfirm","renderConfirmationModel","openModal","setOpenModal","modelData","setModelData","success","data","resetForm","cancel","inputStore","handleSubmit","edited","getEditedData","React","MemoizedSubmitButton","SubmitButton_default","import_react","import_jsx_runtime","InputContainer","children","inputContainerStyles","sharedStyles","modalContainerRef","mode","containerRef","initialRender","inputStore","current","backgroundColor","InputContainer_default","setEditData","data","inputStore","ResetForm","resetData","inputStore"]}